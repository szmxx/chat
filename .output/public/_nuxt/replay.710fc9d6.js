import{r as It,X as Qn,Y as jn,Z as Jn,P as Se,N as Xn,u as qn,z as St,$ as ti,c as pn,a0 as ei,d as ni,o as ii,n as Ee,k as ri,l as oi,m as Rt,B as si,K as ai,v as li}from"./entry.b11c0669.js";import{S as Zt,u as ci,d as ui}from"./record.41dec0be.js";const di=()=>null;function hi(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(t);let[n,i,r={}]=e;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");r.server=r.server??!0,r.default=r.default??di,r.lazy=r.lazy??!1,r.immediate=r.immediate??!0;const o=qn(),s=()=>o.isHydrating?o.payload.data[n]:o.static.data[n],l=()=>s()!==void 0;(!o._asyncData[n]||!r.immediate)&&(o._asyncData[n]={data:It(s()??r.default()),pending:It(!l()),error:Qn(o.payload._errors,n),status:It("idle")});const a={...o._asyncData[n]};a.refresh=a.execute=(h={})=>{if(o._asyncDataPromises[n]){if(h.dedupe===!1)return o._asyncDataPromises[n];o._asyncDataPromises[n].cancelled=!0}if((h._initial||o.isHydrating&&h._initial!==!1)&&l())return s();a.pending.value=!0,a.status.value="pending";const y=new Promise((p,g)=>{try{p(i(o))}catch(f){g(f)}}).then(p=>{if(y.cancelled)return o._asyncDataPromises[n];let g=p;r.transform&&(g=r.transform(p)),r.pick&&(g=pi(g,r.pick)),a.data.value=g,a.error.value=null,a.status.value="success"}).catch(p=>{if(y.cancelled)return o._asyncDataPromises[n];a.error.value=p,a.data.value=St(r.default()),a.status.value="error"}).finally(()=>{y.cancelled||(a.pending.value=!1,o.payload.data[n]=a.data.value,a.error.value&&(o.payload._errors[n]=ti(a.error.value)),delete o._asyncDataPromises[n])});return o._asyncDataPromises[n]=y,o._asyncDataPromises[n]};const u=()=>a.refresh({_initial:!0}),c=r.server!==!1&&o.payload.serverRendered;{const h=jn();if(h&&!h._nuxtOnBeforeMountCbs){h._nuxtOnBeforeMountCbs=[];const p=h._nuxtOnBeforeMountCbs;h&&(Jn(()=>{p.forEach(g=>{g()}),p.splice(0,p.length)}),Se(()=>p.splice(0,p.length)))}c&&o.isHydrating&&l()?(a.pending.value=!1,a.status.value=a.error.value?"error":"success"):h&&(o.payload.serverRendered&&o.isHydrating||r.lazy)&&r.immediate?h._nuxtOnBeforeMountCbs.push(u):r.immediate&&u(),r.watch&&Xn(r.watch,()=>a.refresh());const y=o.hook("app:data:refresh",p=>{if(!p||p.includes(n))return a.refresh()});h&&Se(y)}const d=Promise.resolve(o._asyncDataPromises[n]).then(()=>a);return Object.assign(d,a),d}function pi(e,t){const n={};for(const i of t)n[i]=e[i];return n}const Te=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function gi(e,t){t?t={...Te,...t}:t=Te;const n=gn(t);return n.dispatch(e),n.toString()}const fi=Object.freeze(["prototype","__proto__","constructor"]);function gn(e){let t="",n=new Map;const i=r=>{t+=r};return{toString(){return t},getContext(){return n},dispatch(r){return e.replacer&&(r=e.replacer(r)),this[r===null?"null":typeof r](r)},object(r){if(r&&typeof r.toJSON=="function")return this.object(r.toJSON());const o=Object.prototype.toString.call(r);let s="";const l=o.length;l<10?s="unknown:["+o+"]":s=o.slice(8,l-1),s=s.toLowerCase();let a=null;if((a=n.get(r))===void 0)n.set(r,n.size);else return this.dispatch("[CIRCULAR:"+a+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(r))return i("buffer:"),i(r.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")this[s]?this[s](r):e.ignoreUnknown||this.unkown(r,s);else{let u=Object.keys(r);e.unorderedObjects&&(u=u.sort());let c=[];e.respectType!==!1&&!De(r)&&(c=fi),e.excludeKeys&&(u=u.filter(h=>!e.excludeKeys(h)),c=c.filter(h=>!e.excludeKeys(h))),i("object:"+(u.length+c.length)+":");const d=h=>{this.dispatch(h),i(":"),e.excludeValues||this.dispatch(r[h]),i(",")};for(const h of u)d(h);for(const h of c)d(h)}},array(r,o){if(o=o===void 0?e.unorderedArrays!==!1:o,i("array:"+r.length+":"),!o||r.length<=1){for(const a of r)this.dispatch(a);return}const s=new Map,l=r.map(a=>{const u=gn(e);u.dispatch(a);for(const[c,d]of u.getContext())s.set(c,d);return u.toString()});return n=s,l.sort(),this.array(l,!1)},date(r){return i("date:"+r.toJSON())},symbol(r){return i("symbol:"+r.toString())},unkown(r,o){if(i(o),!!r&&(i(":"),r&&typeof r.entries=="function"))return this.array(Array.from(r.entries()),!0)},error(r){return i("error:"+r.toString())},boolean(r){return i("bool:"+r)},string(r){i("string:"+r.length+":"),i(r)},function(r){i("fn:"),De(r)?this.dispatch("[native]"):this.dispatch(r.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(r.name)),e.respectFunctionProperties&&this.object(r)},number(r){return i("number:"+r)},xml(r){return i("xml:"+r.toString())},null(){return i("Null")},undefined(){return i("Undefined")},regexp(r){return i("regex:"+r.toString())},uint8array(r){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(r))},uint8clampedarray(r){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(r))},int8array(r){return i("int8array:"),this.dispatch(Array.prototype.slice.call(r))},uint16array(r){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(r))},int16array(r){return i("int16array:"),this.dispatch(Array.prototype.slice.call(r))},uint32array(r){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(r))},int32array(r){return i("int32array:"),this.dispatch(Array.prototype.slice.call(r))},float32array(r){return i("float32array:"),this.dispatch(Array.prototype.slice.call(r))},float64array(r){return i("float64array:"),this.dispatch(Array.prototype.slice.call(r))},arraybuffer(r){return i("arraybuffer:"),this.dispatch(new Uint8Array(r))},url(r){return i("url:"+r.toString())},map(r){i("map:");const o=[...r];return this.array(o,e.unorderedSets!==!1)},set(r){i("set:");const o=[...r];return this.array(o,e.unorderedSets!==!1)},file(r){return i("file:"),this.dispatch([r.name,r.size,r.type,r.lastModfied])},blob(){if(e.ignoreUnknown)return i("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return i("domwindow")},bigint(r){return i("bigint:"+r.toString())},process(){return i("process")},timer(){return i("timer")},pipe(){return i("pipe")},tcp(){return i("tcp")},udp(){return i("udp")},tty(){return i("tty")},statwatcher(){return i("statwatcher")},securecontext(){return i("securecontext")},connection(){return i("connection")},zlib(){return i("zlib")},context(){return i("context")},nodescript(){return i("nodescript")},httpparser(){return i("httpparser")},dataview(){return i("dataview")},signal(){return i("signal")},fsevent(){return i("fsevent")},tlswrap(){return i("tlswrap")}}}const fn="[native code] }",mi=fn.length;function De(e){return typeof e!="function"?!1:Function.prototype.toString.call(e).slice(-mi)===fn}class ft{constructor(t,n){t=this.words=t||[],this.sigBytes=n===void 0?t.length*4:n}toString(t){return(t||yi).stringify(this)}concat(t){if(this.clamp(),this.sigBytes%4)for(let n=0;n<t.sigBytes;n++){const i=t.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=i<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<t.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=t.words[n>>>2];return this.sigBytes+=t.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new ft([...this.words])}}const yi={stringify(e){const t=[];for(let n=0;n<e.sigBytes;n++){const i=e.words[n>>>2]>>>24-n%4*8&255;t.push((i>>>4).toString(16),(i&15).toString(16))}return t.join("")}},vi={stringify(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[];for(let i=0;i<e.sigBytes;i+=3){const r=e.words[i>>>2]>>>24-i%4*8&255,o=e.words[i+1>>>2]>>>24-(i+1)%4*8&255,s=e.words[i+2>>>2]>>>24-(i+2)%4*8&255,l=r<<16|o<<8|s;for(let a=0;a<4&&i*8+a*6<e.sigBytes*8;a++)n.push(t.charAt(l>>>6*(3-a)&63))}return n.join("")}},Ci={parse(e){const t=e.length,n=[];for(let i=0;i<t;i++)n[i>>>2]|=(e.charCodeAt(i)&255)<<24-i%4*8;return new ft(n,t)}},Ii={parse(e){return Ci.parse(unescape(encodeURIComponent(e)))}};class bi{constructor(){this._data=new ft,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new ft,this._nDataBytes=0}_append(t){typeof t=="string"&&(t=Ii.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_doProcessBlock(t,n){}_process(t){let n,i=this._data.sigBytes/(this.blockSize*4);t?i=Math.ceil(i):i=Math.max((i|0)-this._minBufferSize,0);const r=i*this.blockSize,o=Math.min(r*4,this._data.sigBytes);if(r){for(let s=0;s<r;s+=this.blockSize)this._doProcessBlock(this._data.words,s);n=this._data.words.splice(0,r),this._data.sigBytes-=o}return new ft(n,o)}}class wi extends bi{update(t){return this._append(t),this._process(),this}finalize(t){t&&this._append(t)}}const Me=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Ai=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],yt=[];class Ni extends wi{constructor(){super(...arguments),this._hash=new ft([...Me])}reset(){super.reset(),this._hash=new ft([...Me])}_doProcessBlock(t,n){const i=this._hash.words;let r=i[0],o=i[1],s=i[2],l=i[3],a=i[4],u=i[5],c=i[6],d=i[7];for(let h=0;h<64;h++){if(h<16)yt[h]=t[n+h]|0;else{const N=yt[h-15],S=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,M=yt[h-2],k=(M<<15|M>>>17)^(M<<13|M>>>19)^M>>>10;yt[h]=S+yt[h-7]+k+yt[h-16]}const y=a&u^~a&c,p=r&o^r&s^o&s,g=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),f=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),C=d+f+y+Ai[h]+yt[h],v=g+p;d=c,c=u,u=a,a=l+C|0,l=s,s=o,o=r,r=C+v|0}i[0]=i[0]+r|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+l|0,i[4]=i[4]+a|0,i[5]=i[5]+u|0,i[6]=i[6]+c|0,i[7]=i[7]+d|0}finalize(t){super.finalize(t);const n=this._nDataBytes*8,i=this._data.sigBytes*8;return this._data.words[i>>>5]|=128<<24-i%32,this._data.words[(i+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(i+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function Si(e){return new Ni().finalize(e).toString(vi)}function Ei(e,t={}){const n=typeof e=="string"?e:gi(e,t);return Si(n).slice(0,10)}function Ti(e,t,n){var S;const[i={},r]=typeof t=="string"?[{},t]:[t,n],o=pn(()=>{let M=e;return typeof M=="function"&&(M=M()),St(M)}),s=i.key||Ei([r,((S=St(i.method))==null?void 0:S.toUpperCase())||"GET",St(i.baseURL),typeof o.value=="string"?o.value:"",St(i.params||i.query)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!e)throw new Error("[nuxt] [useFetch] request is missing.");const l=s===r?"$f"+s:s;if(!i.baseURL&&typeof o.value=="string"&&o.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:a,lazy:u,default:c,transform:d,pick:h,watch:y,immediate:p,...g}=i,f=ei({...g,cache:typeof i.cache=="boolean"?void 0:i.cache}),C={server:a,lazy:u,default:c,transform:d,pick:h,immediate:p,watch:y===!1?[]:[f,o,...y||[]]};let v;return hi(l,()=>{var k;return(k=v==null?void 0:v.abort)==null||k.call(v),v=typeof AbortController<"u"?new AbortController:{},typeof o.value=="string"&&o.value.startsWith("/"),(i.$fetch||globalThis.$fetch)(o.value,{signal:v.signal,...f})},C)}async function Di(e,t={},n={}){const{data:i,error:r,pending:o,execute:s,refresh:l}=await Ti(e,{method:"post",body:t,onRequest({request:a,options:u}){},onResponse({response:a,options:u}){},async onResponseError({request:a,response:u,options:c}){return Promise.reject((u==null?void 0:u._data)??null)},...n},"$YEeKT9ShUj");return{data:It(i.value),error:r,refresh:l,pending:o,execute:s}}function jt(){}function xe(e,t){for(const n in t)e[n]=t[n];return e}function mn(e){return e()}function Re(){return Object.create(null)}function Mt(e){e.forEach(mn)}function Mi(e){return typeof e=="function"}function ve(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ke(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function L(e,t){e.appendChild(t)}function ht(e,t,n){e.insertBefore(t,n||null)}function ct(e){e.parentNode.removeChild(e)}function ne(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function X(e){return document.createElement(e)}function Jt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function wt(e){return document.createTextNode(e)}function et(){return wt(" ")}function Ot(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function T(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Xt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function j(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Tt(e,t,n){e.classList[n?"add":"remove"](t)}let Wt;function Lt(e){Wt=e}function ee(){if(!Wt)throw new Error("Function called outside component initialization");return Wt}function yn(e){ee().$$.on_mount.push(e)}function vn(e){ee().$$.on_destroy.push(e)}function xi(){const e=ee();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=function(s,l,{bubbles:a=!1,cancelable:u=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(s,a,u,l),c}(t,n,{cancelable:i});return r.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}const Bt=[],mt=[],Ht=[],ue=[],Ri=Promise.resolve();let de=!1;function he(e){Ht.push(e)}const ie=new Set;let Pt=0;function Cn(){const e=Wt;do{for(;Pt<Bt.length;){const t=Bt[Pt];Pt++,Lt(t),ki(t.$$)}for(Lt(null),Bt.length=0,Pt=0;mt.length;)mt.pop()();for(let t=0;t<Ht.length;t+=1){const n=Ht[t];ie.has(n)||(ie.add(n),n())}Ht.length=0}while(Bt.length);for(;ue.length;)ue.pop()();de=!1,ie.clear(),Lt(e)}function ki(e){if(e.fragment!==null){e.update(),Mt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(he)}}const Qt=new Set;let Ct;function In(){Ct={r:0,c:[],p:Ct}}function bn(){Ct.r||Mt(Ct.c),Ct=Ct.p}function dt(e,t){e&&e.i&&(Qt.delete(e),e.i(t))}function Dt(e,t,n,i){if(e&&e.o){if(Qt.has(e))return;Qt.add(e),Ct.c.push(()=>{Qt.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function wn(e){e&&e.c()}function Ce(e,t,n,i){const{fragment:r,on_mount:o,on_destroy:s,after_update:l}=e.$$;r&&r.m(t,n),i||he(()=>{const a=o.map(mn).filter(Mi);s?s.push(...a):Mt(a),e.$$.on_mount=[]}),l.forEach(he)}function Ie(e,t){const n=e.$$;n.fragment!==null&&(Mt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Bi(e,t){e.$$.dirty[0]===-1&&(Bt.push(e),de||(de=!0,Ri.then(Cn)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function be(e,t,n,i,r,o,s,l=[-1]){const a=Wt;Lt(e);const u=e.$$={fragment:null,ctx:null,props:o,update:jt,not_equal:r,bound:Re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Re(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};s&&s(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(d,h,...y)=>{const p=y.length?y[0]:h;return u.ctx&&r(u.ctx[d],u.ctx[d]=p)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](p),c&&Bi(e,d)),h}):[],u.update(),c=!0,Mt(u.before_update),u.fragment=!!i&&i(u.ctx),t.target){if(t.hydrate){const d=function(h){return Array.from(h.childNodes)}(t.target);u.fragment&&u.fragment.l(d),d.forEach(ct)}else u.fragment&&u.fragment.c();t.intro&&dt(e.$$.fragment),Ce(e,t.target,t.anchor,t.customElement),Cn()}Lt(a)}class we{$destroy(){Ie(this,1),this.$destroy=jt}$on(t,n){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){var n;this.$$set&&(n=t,Object.keys(n).length!==0)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var q;function Fi(e){return e.nodeType===e.ELEMENT_NODE}(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(q||(q={}));var An=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var i=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return i??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(function(r){return n.removeNodeFromMap(r)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var i=n.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){var i=this.getNode(t);if(i){var r=this.nodeMetaMap.get(i);r&&this.nodeMetaMap.set(n,r)}this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function _i(){return new An}var Be=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function Oi(e,t){t===void 0&&(t={});var n=1,i=1;function r(b){var m=b.match(/\n/g);m&&(n+=m.length);var D=b.lastIndexOf(`
`);i=D===-1?i+b.length:b.length-D}function o(){var b={line:n,column:i};return function(m){return m.position=new s(b),y(),m}}var s=function(b){this.start=b,this.end={line:n,column:i},this.source=t.source};s.prototype.content=e;var l=[];function a(b){var m=new Error("".concat(t.source||"",":").concat(n,":").concat(i,": ").concat(b));if(m.reason=b,m.filename=t.source,m.line=n,m.column=i,m.source=e,!t.silent)throw m;l.push(m)}function u(){return h(/^{\s*/)}function c(){return h(/^}/)}function d(){var b,m=[];for(y(),p(m);e.length&&e.charAt(0)!=="}"&&(b=I()||B());)b!==!1&&(m.push(b),p(m));return m}function h(b){var m=b.exec(e);if(m){var D=m[0];return r(D),e=e.slice(D.length),m}}function y(){h(/^\s*/)}function p(b){var m;for(b===void 0&&(b=[]);m=g();)m!==!1&&b.push(m),m=g();return b}function g(){var b=o();if(e.charAt(0)==="/"&&e.charAt(1)==="*"){for(var m=2;e.charAt(m)!==""&&(e.charAt(m)!=="*"||e.charAt(m+1)!=="/");)++m;if(m+=2,e.charAt(m-1)==="")return a("End of comment missing");var D=e.slice(2,m-2);return i+=2,r(D),e=e.slice(m),i+=2,b({type:"comment",comment:D})}}function f(){var b=h(/^([^{]+)/);if(b)return ut(b[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(m){return m.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(m){return m.replace(/\u200C/g,",")})}function C(){var b=o(),m=h(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(m){var D=ut(m[0]);if(!h(/^:\s*/))return a("property missing ':'");var E=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),Y=b({type:"declaration",property:D.replace(Be,""),value:E?ut(E[0]).replace(Be,""):""});return h(/^[;\s]*/),Y}}function v(){var b,m=[];if(!u())return a("missing '{'");for(p(m);b=C();)b!==!1&&(m.push(b),p(m)),b=C();return c()?m:a("missing '}'")}function N(){for(var b,m=[],D=o();b=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)m.push(b[1]),h(/^,\s*/);if(m.length)return D({type:"keyframe",values:m,declarations:v()})}var S,M=G("import"),k=G("charset"),Z=G("namespace");function G(b){var m=new RegExp("^@"+b+"\\s*([^;]+);");return function(){var D=o(),E=h(m);if(E){var Y={type:b};return Y[b]=E[1].trim(),D(Y)}}}function I(){if(e[0]==="@")return function(){var b=o(),m=h(/^@([-\w]+)?keyframes\s*/);if(m){var D=m[1];if(!(m=h(/^([-\w]+)\s*/)))return a("@keyframes missing name");var E,Y=m[1];if(!u())return a("@keyframes missing '{'");for(var V=p();E=N();)V.push(E),V=V.concat(p());return c()?b({type:"keyframes",name:Y,vendor:D,keyframes:V}):a("@keyframes missing '}'")}}()||function(){var b=o(),m=h(/^@media *([^{]+)/);if(m){var D=ut(m[1]);if(!u())return a("@media missing '{'");var E=p().concat(d());return c()?b({type:"media",media:D,rules:E}):a("@media missing '}'")}}()||function(){var b=o(),m=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(m)return b({type:"custom-media",name:ut(m[1]),media:ut(m[2])})}()||function(){var b=o(),m=h(/^@supports *([^{]+)/);if(m){var D=ut(m[1]);if(!u())return a("@supports missing '{'");var E=p().concat(d());return c()?b({type:"supports",supports:D,rules:E}):a("@supports missing '}'")}}()||M()||k()||Z()||function(){var b=o(),m=h(/^@([-\w]+)?document *([^{]+)/);if(m){var D=ut(m[1]),E=ut(m[2]);if(!u())return a("@document missing '{'");var Y=p().concat(d());return c()?b({type:"document",document:E,vendor:D,rules:Y}):a("@document missing '}'")}}()||function(){var b=o();if(h(/^@page */)){var m=f()||[];if(!u())return a("@page missing '{'");for(var D,E=p();D=C();)E.push(D),E=E.concat(p());return c()?b({type:"page",selectors:m,declarations:E}):a("@page missing '}'")}}()||function(){var b=o();if(h(/^@host\s*/)){if(!u())return a("@host missing '{'");var m=p().concat(d());return c()?b({type:"host",rules:m}):a("@host missing '}'")}}()||function(){var b=o();if(h(/^@font-face\s*/)){if(!u())return a("@font-face missing '{'");for(var m,D=p();m=C();)D.push(m),D=D.concat(p());return c()?b({type:"font-face",declarations:D}):a("@font-face missing '}'")}}()}function B(){var b=o(),m=f();return m?(p(),b({type:"rule",selectors:m,declarations:v()})):a("selector missing")}return pe((S=d(),{type:"stylesheet",stylesheet:{source:t.source,rules:S,parsingErrors:l}}))}function ut(e){return e?e.replace(/^\s+|\s+$/g,""):""}function pe(e,t){for(var n=e&&typeof e.type=="string",i=n?e:t,r=0,o=Object.keys(e);r<o.length;r++){var s=e[o[r]];Array.isArray(s)?s.forEach(function(l){pe(l,i)}):s&&typeof s=="object"&&pe(s,i)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var Fe={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"},Nn=/([^\\]):hover/,Li=new RegExp(Nn.source,"g");function _e(e,t){var n=t==null?void 0:t.stylesWithHoverClass.get(e);if(n)return n;var i=Oi(e,{silent:!0});if(!i.stylesheet)return e;var r=[];if(i.stylesheet.rules.forEach(function(l){"selectors"in l&&(l.selectors||[]).forEach(function(a){Nn.test(a)&&r.push(a)})}),r.length===0)return e;var o=new RegExp(r.filter(function(l,a){return r.indexOf(l)===a}).sort(function(l,a){return a.length-l.length}).map(function(l){return l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).join("|"),"g"),s=e.replace(o,function(l){var a=l.replace(Li,"$1.\\:hover");return"".concat(l,", ").concat(a)});return t==null||t.stylesWithHoverClass.set(e,s),s}function Oe(){return{stylesWithHoverClass:new Map}}function Vi(e,t){var n=t.doc,i=t.hackCss,r=t.cache;switch(e.type){case q.Document:return n.implementation.createDocument(null,"",null);case q.DocumentType:return n.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case q.Element:var o,s=function(v){var N=Fe[v.tagName]?Fe[v.tagName]:v.tagName;return N==="link"&&v.attributes._cssText&&(N="style"),N}(e);o=e.isSVG?n.createElementNS("http://www.w3.org/2000/svg",s):n.createElement(s);var l={};for(var a in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,a)){var u=e.attributes[a];if(s!=="option"||a!=="selected"||u!==!1)if(u===!0&&(u=""),a.startsWith("rr_"))l[a]=u;else{var c=s==="textarea"&&a==="value",d=s==="style"&&a==="_cssText";if(d&&i&&typeof u=="string"&&(u=_e(u,r)),!c&&!d||typeof u!="string")try{if(e.isSVG&&a==="xlink:href")o.setAttributeNS("http://www.w3.org/1999/xlink",a,u.toString());else if(a==="onload"||a==="onclick"||a.substring(0,7)==="onmouse")o.setAttribute("_"+a,u.toString());else{if(s==="meta"&&e.attributes["http-equiv"]==="Content-Security-Policy"&&a==="content"){o.setAttribute("csp-content",u.toString());continue}s==="link"&&e.attributes.rel==="preload"&&e.attributes.as==="script"||s==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")||(s==="img"&&e.attributes.srcset&&e.attributes.rr_dataURL?o.setAttribute("rrweb-original-srcset",e.attributes.srcset):o.setAttribute(a,u.toString()))}}catch{}else{for(var h=n.createTextNode(u),y=0,p=Array.from(o.childNodes);y<p.length;y++){var g=p[y];g.nodeType===o.TEXT_NODE&&o.removeChild(g)}o.appendChild(h)}}}var f=function(v){var N=l[v];if(s==="canvas"&&v==="rr_dataURL"){var S=document.createElement("img");S.onload=function(){var k=o.getContext("2d");k&&k.drawImage(S,0,0,S.width,S.height)},S.src=N.toString(),o.RRNodeType&&(o.rr_dataURL=N.toString())}else if(s==="img"&&v==="rr_dataURL"){var M=o;M.currentSrc.startsWith("data:")||(M.setAttribute("rrweb-original-src",e.attributes.src),M.src=N.toString())}if(v==="rr_width")o.style.width=N.toString();else if(v==="rr_height")o.style.height=N.toString();else if(v==="rr_mediaCurrentTime"&&typeof N=="number")o.currentTime=N;else if(v==="rr_mediaState")switch(N){case"played":o.play().catch(function(k){return console.warn("media playback error",k)});break;case"paused":o.pause()}};for(var C in l)f(C);if(e.isShadowHost)if(o.shadowRoot)for(;o.shadowRoot.firstChild;)o.shadowRoot.removeChild(o.shadowRoot.firstChild);else o.attachShadow({mode:"open"});return o;case q.Text:return n.createTextNode(e.isStyle&&i?_e(e.textContent,r):e.textContent);case q.CDATA:return n.createCDATASection(e.textContent);case q.Comment:return n.createComment(e.textContent);default:return null}}function Vt(e,t){var n=t.doc,i=t.mirror,r=t.skipChild,o=r!==void 0&&r,s=t.hackCss,l=s===void 0||s,a=t.afterAppend,u=t.cache,c=Vi(e,{doc:n,hackCss:l,cache:u});if(!c)return null;if(e.rootId&&i.getNode(e.rootId)!==n&&i.replace(e.rootId,n),e.type===q.Document&&(n.close(),n.open(),e.compatMode==="BackCompat"&&e.childNodes&&e.childNodes[0].type!==q.DocumentType&&(e.childNodes[0].type===q.Element&&"xmlns"in e.childNodes[0].attributes&&e.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),c=n),i.add(c,e),(e.type===q.Document||e.type===q.Element)&&!o)for(var d=0,h=e.childNodes;d<h.length;d++){var y=h[d],p=Vt(y,{doc:n,mirror:i,skipChild:!1,hackCss:l,afterAppend:a,cache:u});p?(y.isShadow&&Fi(c)&&c.shadowRoot?c.shadowRoot.appendChild(p):c.appendChild(p),a&&a(p,y.id)):console.warn("Failed to rebuild",y)}return c}function Ui(e,t){var n=t.doc,i=t.onVisit,r=t.hackCss,o=r===void 0||r,s=t.afterAppend,l=t.cache,a=t.mirror,u=a===void 0?new An:a,c=Vt(e,{doc:n,mirror:u,skipChild:!1,hackCss:o,afterAppend:s,cache:l});return function(d,h){for(var y=0,p=d.getIds();y<p.length;y++){var g=p[y];d.has(g)&&h(d.getNode(g))}}(u,function(d){i&&i(d),function(h,y){var p=y.getMeta(h);if((p==null?void 0:p.type)===q.Element){var g=h;for(var f in p.attributes)if(Object.prototype.hasOwnProperty.call(p.attributes,f)&&f.startsWith("rr_")){var C=p.attributes[f];f==="rr_scrollLeft"&&(g.scrollLeft=C),f==="rr_scrollTop"&&(g.scrollTop=C)}}}(d,u)}),c}const At=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Le={map:{},getId:()=>(console.error(At),-1),getNode:()=>(console.error(At),null),removeNodeFromMap(){console.error(At)},has:()=>(console.error(At),!1),reset(){console.error(At)}};function Wi(e){const t={},n=(r,o)=>{const s={value:r,parent:o,children:[]};return t[r.node.id]=s,s},i=[];for(const r of e){const{nextId:o,parentId:s}=r;if(o&&o in t){const l=t[o];if(l.parent){const a=l.parent.children.indexOf(l);l.parent.children.splice(a,0,n(r,l.parent))}else{const a=i.indexOf(l);i.splice(a,0,n(r,null))}}else if(s in t){const l=t[s];l.children.push(n(r,l))}else i.push(n(r,null))}return i}function Sn(e,t){t(e.value);for(let n=e.children.length-1;n>=0;n--)Sn(e.children[n],t)}function re(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function En(e,t){var n,i;const r=(i=(n=e.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||i===void 0?void 0:i.frameElement;if(!r||r===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const o=r.getBoundingClientRect(),s=En(r,t),l=o.height/r.clientHeight;return{x:o.x*s.relativeScale+s.x,y:o.y*s.relativeScale+s.y,relativeScale:l,absoluteScale:s.absoluteScale*l}}function Kt(e){return!!(e!=null&&e.shadowRoot)}function Ft(e,t){const n=e[t[0]];return t.length===1?n:Ft(n.cssRules[t[1]].cssRules,t.slice(2))}function Ve(e){const t=[...e],n=t.pop();return{positions:t,index:n}}typeof window<"u"&&window.Proxy&&window.Reflect&&(Le=new Proxy(Le,{get:(e,t,n)=>(t==="map"&&console.error(At),Reflect.get(e,t,n))}));class Gi{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var n;return(n=this.styleIDMap.get(t))!==null&&n!==void 0?n:-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let i;return i=n===void 0?this.id++:n,this.styleIDMap.set(t,i),this.idStyleMap.set(i,t),i}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var P=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(P||{}),O=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(O||{}),tt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(tt||{}),qt=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(qt||{}),W=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(W||{});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bt(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(u){try{a(i.next(u))}catch(c){o(c)}}function l(u){try{a(i.throw(u))}catch(c){o(c)}}function a(u){var c;u.done?r(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(s,l)}a((i=i.apply(e,t||[])).next())})}for(var Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_t=typeof Uint8Array>"u"?[]:new Uint8Array(256),Yt=0;Yt<Ue.length;Yt++)_t[Ue.charCodeAt(Yt)]=Yt;var Tn=null;try{var $i=typeof module<"u"&&typeof module.require=="function"&&module.require("worker_threads")||typeof __non_webpack_require__=="function"&&__non_webpack_require__("worker_threads")||typeof require=="function"&&require("worker_threads");Tn=$i.Worker}catch{}function Zi(e,t,n){var i=t===void 0?null:t,r=function(l,a){return Buffer.from(l,"base64").toString(a?"utf16":"utf8")}(e,n!==void 0&&n),o=r.indexOf(`
`,10)+1,s=r.substring(o)+(i?"//# sourceMappingURL="+i:"");return function(l){return new Tn(s,Object.assign({},l,{eval:!0}))}}var We,Ge,$e,F,Pi=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";We="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",Ge=null,$e=!1,Pi&&Zi(We,Ge,$e),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(F||(F={}));var Ki=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var n;if(!t)return-1;var i=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return i??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var n=this,i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(function(r){return n.removeNodeFromMap(r)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,n){var i=n.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,n)},e.prototype.replace=function(t,n){var i=this.getNode(t);if(i){var r=this.nodeMetaMap.get(i);r&&this.nodeMetaMap.set(n,r)}this.idNodeMap.set(t,n)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Ze(e){const t=[];for(const n in e){const i=e[n];if(typeof i!="string")continue;const r=Qi(n);t.push(`${r}: ${i};`)}return t.join(" ")}const Yi=/-([a-z])/g,zi=/^--[a-zA-Z0-9-]+$/,oe=e=>zi.test(e)?e:e.replace(Yi,(t,n)=>n?n.toUpperCase():""),Hi=/\B([A-Z])/g,Qi=e=>e.replace(Hi,"-$1").toLowerCase();class ot{constructor(...t){this.childNodes=[],this.parentElement=null,this.parentNode=null,this.ELEMENT_NODE=H.ELEMENT_NODE,this.TEXT_NODE=H.TEXT_NODE}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get nextSibling(){const t=this.parentNode;if(!t)return null;const n=t.childNodes,i=n.indexOf(this);return n[i+1]||null}contains(t){if(t===this)return!0;for(const n of this.childNodes)if(n.contains(t))return!0;return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,n){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function Dn(e){return class extends e{constructor(t,n,i){super(),this.nodeType=H.DOCUMENT_TYPE_NODE,this.RRNodeType=F.DocumentType,this.textContent=null,this.name=t,this.publicId=n,this.systemId=i,this.nodeName=t}toString(){return"RRDocumentType"}}}function Mn(e){return class extends e{constructor(t){super(),this.nodeType=H.ELEMENT_NODE,this.RRNodeType=F.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let t="";return this.childNodes.forEach(n=>t+=n.textContent),t}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get classList(){return new ji(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const t=this.attributes.style?function(i){const r={},o=/:(.+)/;return i.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach(function(s){if(s){const l=s.split(o);l.length>1&&(r[oe(l[0].trim())]=l[1].trim())}}),r}(this.attributes.style):{},n=/\B([A-Z])/g;return t.setProperty=(i,r,o)=>{if(n.test(i))return;const s=oe(i);r?t[s]=r:delete t[s],o==="important"&&(t[s]+=" !important"),this.attributes.style=Ze(t)},t.removeProperty=i=>{if(n.test(i))return"";const r=oe(i),o=t[r]||"";return delete t[r],this.attributes.style=Ze(t),o},t}getAttribute(t){return this.attributes[t]||null}setAttribute(t,n){this.attributes[t]=n}setAttributeNS(t,n,i){this.setAttribute(n,i)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return this.childNodes.push(t),t.parentNode=this,t.parentElement=this,t}insertBefore(t,n){if(n===null)return this.appendChild(t);const i=this.childNodes.indexOf(n);if(i==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(i,0,t),t.parentElement=this,t.parentNode=this,t}removeChild(t){const n=this.childNodes.indexOf(t);if(n===-1)throw new Error("Failed to execute 'removeChild' on 'RRElement': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(n,1),t.parentElement=null,t.parentNode=null,t}attachShadow(t){const n=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=n,n}dispatchEvent(t){return!0}toString(){let t="";for(const n in this.attributes)t+=`${n}="${this.attributes[n]}" `;return`${this.tagName} ${t}`}}}function xn(e){return class extends e{constructor(t){super(),this.nodeType=H.TEXT_NODE,this.nodeName="#text",this.RRNodeType=F.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function Rn(e){return class extends e{constructor(t){super(),this.nodeType=H.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=F.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function kn(e){return class extends e{constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=H.CDATA_SECTION_NODE,this.RRNodeType=F.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class ji{constructor(t,n){if(this.classes=[],this.add=(...i)=>{for(const r of i){const o=String(r);this.classes.indexOf(o)>=0||this.classes.push(o)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...i)=>{this.classes=this.classes.filter(r=>i.indexOf(r)===-1),this.onChange&&this.onChange(this.classes.join(" "))},t){const i=t.trim().split(/\s+/);this.classes.push(...i)}this.onChange=n}}var H;(function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(H||(H={}));const ge={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},Ji={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function lt(e,t,n,i){const r=e.childNodes,o=t.childNodes;i=i||t.mirror||t.ownerDocument.mirror,(r.length>0||o.length>0)&&Pe(Array.from(r),o,e,n,i);let s=null,l=null;switch(t.RRNodeType){case F.Document:l=t.scrollData;break;case F.Element:{const a=e,u=t;switch(function(c,d,h){const y=c.attributes,p=d.attributes;for(const g in p){const f=p[g],C=h.getMeta(d);if(C&&"isSVG"in C&&C.isSVG&&ge[g])c.setAttributeNS(ge[g],g,f);else if(d.tagName==="CANVAS"&&g==="rr_dataURL"){const v=document.createElement("img");v.src=f,v.onload=()=>{const N=c.getContext("2d");N&&N.drawImage(v,0,0,v.width,v.height)}}else c.setAttribute(g,f)}for(const{name:g}of Array.from(y))g in p||c.removeAttribute(g);d.scrollLeft&&(c.scrollLeft=d.scrollLeft),d.scrollTop&&(c.scrollTop=d.scrollTop)}(a,u,i),l=u.scrollData,s=u.inputData,u.tagName){case"AUDIO":case"VIDEO":{const c=e,d=u;d.paused!==void 0&&(d.paused?c.pause():c.play()),d.muted!==void 0&&(c.muted=d.muted),d.volume!==void 0&&(c.volume=d.volume),d.currentTime!==void 0&&(c.currentTime=d.currentTime),d.playbackRate!==void 0&&(c.playbackRate=d.playbackRate);break}case"CANVAS":{const c=t;if(c.rr_dataURL!==null){const d=document.createElement("img");d.onload=()=>{const h=a.getContext("2d");h&&h.drawImage(d,0,0,d.width,d.height)},d.src=c.rr_dataURL}c.canvasMutations.forEach(d=>n.applyCanvas(d.event,d.mutation,e))}break;case"STYLE":{const c=a.sheet;c&&t.rules.forEach(d=>n.applyStyleSheetMutation(d,c))}}if(u.shadowRoot){a.shadowRoot||a.attachShadow({mode:"open"});const c=a.shadowRoot.childNodes,d=u.shadowRoot.childNodes;(c.length>0||d.length>0)&&Pe(Array.from(c),d,a.shadowRoot,n,i)}break}case F.Text:case F.Comment:case F.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}if(l&&n.applyScroll(l,!0),s&&n.applyInput(s),t.nodeName==="IFRAME"){const a=e.contentDocument,u=t;if(a){const c=i.getMeta(u.contentDocument);c&&n.mirror.add(a,Object.assign({},c)),lt(a,u.contentDocument,n,i)}}}function Pe(e,t,n,i,r){var o;let s,l,a=0,u=e.length-1,c=0,d=t.length-1,h=e[a],y=e[u],p=t[c],g=t[d];for(;a<=u&&c<=d;){const f=i.mirror.getId(h),C=i.mirror.getId(y),v=r.getId(p),N=r.getId(g);if(h===void 0)h=e[++a];else if(y===void 0)y=e[--u];else if(f!==-1&&f===v)lt(h,p,i,r),h=e[++a],p=t[++c];else if(C!==-1&&C===N)lt(y,g,i,r),y=e[--u],g=t[--d];else if(f!==-1&&f===N)n.insertBefore(h,y.nextSibling),lt(h,g,i,r),h=e[++a],g=t[--d];else if(C!==-1&&C===v)n.insertBefore(y,h),lt(y,p,i,r),y=e[--u],p=t[++c];else{if(!s){s={};for(let S=a;S<=u;S++){const M=e[S];M&&i.mirror.hasNode(M)&&(s[i.mirror.getId(M)]=S)}}if(l=s[r.getId(p)],l){const S=e[l];n.insertBefore(S,h),lt(S,p,i,r),e[l]=void 0}else{const S=fe(p,i.mirror,r);n.nodeName==="#document"&&((o=i.mirror.getMeta(S))===null||o===void 0?void 0:o.type)===F.Element&&n.documentElement&&(n.removeChild(n.documentElement),e[a]=void 0,h=void 0),n.insertBefore(S,h||null),lt(S,p,i,r)}p=t[++c]}}if(a>u){const f=t[d+1];let C=null;for(f&&n.childNodes.forEach(v=>{i.mirror.getId(v)===r.getId(f)&&(C=v)});c<=d;++c){const v=fe(t[c],i.mirror,r);n.insertBefore(v,C),lt(v,t[c],i,r)}}else if(c>d)for(;a<=u;a++){const f=e[a];f&&(n.removeChild(f),i.mirror.removeNodeFromMap(f))}}function fe(e,t,n){const i=n.getId(e),r=n.getMeta(e);let o=null;if(i>-1&&(o=t.getNode(i)),o!==null)return o;switch(e.RRNodeType){case F.Document:o=new Document;break;case F.DocumentType:o=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case F.Element:{let s=e.tagName.toLowerCase();s=Ji[s]||s,o=r&&"isSVG"in r&&(r!=null&&r.isSVG)?document.createElementNS(ge.svg,s):document.createElement(e.tagName);break}case F.Text:o=document.createTextNode(e.data);break;case F.Comment:o=document.createComment(e.data);break;case F.CDATA:o=document.createCDATASection(e.data)}return r&&t.add(o,Object.assign({},r)),o}class xt extends function(t){return class Bn extends t{constructor(){super(...arguments),this.nodeType=H.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=F.Document,this.textContent=null}get documentElement(){return this.childNodes.find(i=>i.RRNodeType===F.Element&&i.tagName==="HTML")||null}get body(){var i;return((i=this.documentElement)===null||i===void 0?void 0:i.childNodes.find(r=>r.RRNodeType===F.Element&&r.tagName==="BODY"))||null}get head(){var i;return((i=this.documentElement)===null||i===void 0?void 0:i.childNodes.find(r=>r.RRNodeType===F.Element&&r.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(i){const r=i.RRNodeType;if((r===F.Element||r===F.DocumentType)&&this.childNodes.some(o=>o.RRNodeType===r))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${r===F.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);return i.parentElement=null,i.parentNode=this,this.childNodes.push(i),i}insertBefore(i,r){const o=i.RRNodeType;if((o===F.Element||o===F.DocumentType)&&this.childNodes.some(l=>l.RRNodeType===o))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${o===F.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);if(r===null)return this.appendChild(i);const s=this.childNodes.indexOf(r);if(s==-1)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return this.childNodes.splice(s,0,i),i.parentElement=null,i.parentNode=this,i}removeChild(i){const r=this.childNodes.indexOf(i);if(r===-1)throw new Error("Failed to execute 'removeChild' on 'RRDocument': The RRNode to be removed is not a child of this RRNode.");return this.childNodes.splice(r,1),i.parentElement=null,i.parentNode=null,i}open(){this.childNodes=[]}close(){}write(i){let r;if(i==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?r="-//W3C//DTD XHTML 1.0 Transitional//EN":i==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(r="-//W3C//DTD HTML 4.0 Transitional//EN"),r){const o=this.createDocumentType("html",r,"");this.open(),this.appendChild(o)}}createDocument(i,r,o){return new Bn}createDocumentType(i,r,o){const s=new(Dn(ot))(i,r,o);return s.ownerDocument=this,s}createElement(i){const r=new(Mn(ot))(i);return r.ownerDocument=this,r}createElementNS(i,r){return this.createElement(r)}createTextNode(i){const r=new(xn(ot))(i);return r.ownerDocument=this,r}createComment(i){const r=new(Rn(ot))(i);return r.ownerDocument=this,r}createCDATASection(i){const r=new(kn(ot))(i);return r.ownerDocument=this,r}toString(){return"RRDocument"}}}(ot){constructor(t){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=new ar,this.scrollData=null,t&&(this.mirror=t)}get unserializedId(){return this._unserializedId--}createDocument(t,n,i){return new xt}createDocumentType(t,n,i){const r=new Xi(t,n,i);return r.ownerDocument=this,r}createElement(t){const n=t.toUpperCase();let i;switch(n){case"AUDIO":case"VIDEO":i=new qi(n);break;case"IFRAME":i=new nr(n,this.mirror);break;case"CANVAS":i=new tr(n);break;case"STYLE":i=new er(n);break;default:i=new Gt(n)}return i.ownerDocument=this,i}createComment(t){const n=new rr(t);return n.ownerDocument=this,n}createCDATASection(t){const n=new or(t);return n.ownerDocument=this,n}createTextNode(t){const n=new ir(t);return n.ownerDocument=this,n}destroyTree(){this.childNodes=[],this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const Xi=Dn(ot);class Gt extends Mn(ot){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class qi extends function(t){return class extends t{attachShadow(n){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}(Gt){}class tr extends Gt{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class er extends Gt{constructor(){super(...arguments),this.rules=[]}}class nr extends Gt{constructor(t,n){super(t),this.contentDocument=new xt,this.contentDocument.mirror=n}}const ir=xn(ot),rr=Rn(ot),or=kn(ot);function Fn(e,t,n,i){let r;switch(e.nodeType){case H.DOCUMENT_NODE:i&&i.nodeName==="IFRAME"?r=i.contentDocument:(r=t,r.compatMode=e.compatMode);break;case H.DOCUMENT_TYPE_NODE:{const s=e;r=t.createDocumentType(s.name,s.publicId,s.systemId);break}case H.ELEMENT_NODE:{const s=e,l=function(u){return u instanceof HTMLFormElement?"FORM":u.tagName.toUpperCase()}(s);r=t.createElement(l);const a=r;for(const{name:u,value:c}of Array.from(s.attributes))a.attributes[u]=c;s.scrollLeft&&(a.scrollLeft=s.scrollLeft),s.scrollTop&&(a.scrollTop=s.scrollTop);break}case H.TEXT_NODE:r=t.createTextNode(e.textContent||"");break;case H.CDATA_SECTION_NODE:r=t.createCDATASection(e.data);break;case H.COMMENT_NODE:r=t.createComment(e.textContent||"");break;case H.DOCUMENT_FRAGMENT_NODE:r=i.attachShadow({mode:"open"});break;default:return null}let o=n.getMeta(e);return t instanceof xt&&(o||(o=_n(r,t.unserializedId),n.add(e,o)),t.mirror.add(r,Object.assign({},o))),r}function sr(e,t=function(){return new Ki}(),n=new xt){return function i(r,o){const s=Fn(r,n,t,o);if(s!==null)if((o==null?void 0:o.nodeName)!=="IFRAME"&&r.nodeType!==H.DOCUMENT_FRAGMENT_NODE&&(o==null||o.appendChild(s),s.parentNode=o,s.parentElement=o),r.nodeName==="IFRAME"){const l=r.contentDocument;l&&i(l,s)}else r.nodeType!==H.DOCUMENT_NODE&&r.nodeType!==H.ELEMENT_NODE&&r.nodeType!==H.DOCUMENT_FRAGMENT_NODE||(r.nodeType===H.ELEMENT_NODE&&r.shadowRoot&&i(r.shadowRoot,s),r.childNodes.forEach(l=>i(l,s)))}(e,null),n}class ar{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var n;if(!t)return-1;const i=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return i??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(i=>this.removeNodeFromMap(i))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const i=n.id;this.idNodeMap.set(i,t),this.nodeMetaMap.set(t,n)}replace(t,n){const i=this.getNode(t);if(i){const r=this.nodeMetaMap.get(i);r&&this.nodeMetaMap.set(n,r)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function _n(e,t){switch(e.RRNodeType){case F.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case F.DocumentType:{const n=e;return{id:t,type:e.RRNodeType,name:n.name,publicId:n.publicId,systemId:n.systemId}}case F.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case F.Text:case F.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case F.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}var nt=Uint8Array,pt=Uint16Array,me=Uint32Array,On=new nt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ln=new nt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),lr=new nt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vn=function(e,t){for(var n=new pt(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new me(n[30]);for(i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return[n,r]},Un=Vn(On,2),Wn=Un[0],cr=Un[1];Wn[28]=258,cr[258]=28;for(var ur=Vn(Ln,0)[0],ye=new pt(32768),K=0;K<32768;++K){var vt=(43690&K)>>>1|(21845&K)<<1;vt=(61680&(vt=(52428&vt)>>>2|(13107&vt)<<2))>>>4|(3855&vt)<<4,ye[K]=((65280&vt)>>>8|(255&vt)<<8)>>>1}var Ut=function(e,t,n){for(var i=e.length,r=0,o=new pt(t);r<i;++r)++o[e[r]-1];var s,l=new pt(t);for(r=0;r<t;++r)l[r]=l[r-1]+o[r-1]<<1;if(n){s=new pt(1<<t);var a=15-t;for(r=0;r<i;++r)if(e[r])for(var u=r<<4|e[r],c=t-e[r],d=l[e[r]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)s[ye[d]>>>a]=u}else for(s=new pt(i),r=0;r<i;++r)s[r]=ye[l[e[r]-1]++]>>>15-e[r];return s},$t=new nt(288);for(K=0;K<144;++K)$t[K]=8;for(K=144;K<256;++K)$t[K]=9;for(K=256;K<280;++K)$t[K]=7;for(K=280;K<288;++K)$t[K]=8;var Gn=new nt(32);for(K=0;K<32;++K)Gn[K]=5;var dr=Ut($t,9,1),hr=Ut(Gn,5,1),se=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},rt=function(e,t,n){var i=t/8>>0;return(e[i]|e[i+1]<<8)>>>(7&t)&n},ae=function(e,t){var n=t/8>>0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},$n=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var i=new(e instanceof pt?pt:e instanceof me?me:nt)(n-t);return i.set(e.subarray(t,n)),i};function pr(e,t){return function(n,i,r){var o=n.length,s=!i||r,l=!r||r.i;r||(r={}),i||(i=new nt(3*o));var a,u=function(it){var Ae=i.length;if(it>Ae){var Ne=new nt(Math.max(2*Ae,it));Ne.set(i),i=Ne}},c=r.f||0,d=r.p||0,h=r.b||0,y=r.l,p=r.d,g=r.m,f=r.n,C=8*o;do{if(!y){r.f=c=rt(n,d,1);var v=rt(n,d+1,3);if(d+=3,!v){var N=n[(E=((a=d)/8>>0)+(7&a&&1)+4)-4]|n[E-3]<<8,S=E+N;if(S>o){if(l)throw"unexpected EOF";break}s&&u(h+N),i.set(n.subarray(E,S),h),r.b=h+=N,r.p=d=8*S;continue}if(v==1)y=dr,p=hr,g=9,f=5;else{if(v!=2)throw"invalid block type";var M=rt(n,d,31)+257,k=rt(n,d+10,15)+4,Z=M+rt(n,d+5,31)+1;d+=14;for(var G=new nt(Z),I=new nt(19),B=0;B<k;++B)I[lr[B]]=rt(n,d+3*B,7);d+=3*k;var b=se(I),m=(1<<b)-1;if(!l&&d+Z*(b+7)>C)break;var D=Ut(I,b,1);for(B=0;B<Z;){var E,Y=D[rt(n,d,m)];if(d+=15&Y,(E=Y>>>4)<16)G[B++]=E;else{var V=0,w=0;for(E==16?(w=3+rt(n,d,3),d+=2,V=G[B-1]):E==17?(w=3+rt(n,d,7),d+=3):E==18&&(w=11+rt(n,d,127),d+=7);w--;)G[B++]=V}}var _=G.subarray(0,M),R=G.subarray(M);g=se(_),f=se(R),y=Ut(_,g,1),p=Ut(R,f,1)}if(d>C)throw"unexpected EOF"}s&&u(h+131072);for(var z=(1<<g)-1,Q=(1<<f)-1,st=g+f+18;l||d+st<C;){var J=(V=y[ae(n,d)&z])>>>4;if((d+=15&V)>C)throw"unexpected EOF";if(!V)throw"invalid length/literal";if(J<256)i[h++]=J;else{if(J==256){y=null;break}var A=J-254;if(J>264){var U=On[B=J-257];A=rt(n,d,(1<<U)-1)+Wn[B],d+=U}var $=p[ae(n,d)&Q],at=$>>>4;if(!$)throw"invalid distance";if(d+=15&$,R=ur[at],at>3&&(U=Ln[at],R+=ae(n,d)&(1<<U)-1,d+=U),d>C)throw"unexpected EOF";s&&u(h+131072);for(var x=h+A;h<x;h+=4)i[h]=i[h-R],i[h+1]=i[h+1-R],i[h+2]=i[h+2-R],i[h+3]=i[h+3-R];h=x}}r.l=y,r.p=d,r.b=h,y&&(c=1,r.m=g,r.d=p,r.n=f)}while(!c);return h==i.length?i:$n(i,0,h)}((function(n){if((15&n[0])!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(32&n[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}const gr=e=>{if(typeof e!="string")return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch{}try{const t=JSON.parse(function(n,i){var r="";if(!i&&typeof TextDecoder<"u")return new TextDecoder().decode(n);for(var o=0;o<n.length;){var s=n[o++];s<128||i?r+=String.fromCharCode(s):s<224?r+=String.fromCharCode((31&s)<<6|63&n[o++]):s<240?r+=String.fromCharCode((15&s)<<12|(63&n[o++])<<6|63&n[o++]):(s=((15&s)<<18|(63&n[o++])<<12|(63&n[o++])<<6|63&n[o++])-65536,r+=String.fromCharCode(55296|s>>10,56320|1023&s))}return r}(pr(function(n,i){var r=n.length;if(!i&&typeof TextEncoder<"u")return new TextEncoder().encode(n);for(var o=new nt(n.length+(n.length>>>1)),s=0,l=function(d){o[s++]=d},a=0;a<r;++a){if(s+5>o.length){var u=new nt(s+8+(r-a<<1));u.set(o),o=u}var c=n.charCodeAt(a);c<128||i?l(c):c<2048?(l(192|c>>>6),l(128|63&c)):c>55295&&c<57344?(l(240|(c=65536+(1047552&c)|1023&n.charCodeAt(++a))>>>18),l(128|c>>>12&63),l(128|c>>>6&63),l(128|63&c)):(l(224|c>>>12),l(128|c>>>6&63),l(128|63&c))}return $n(o,0,s)}(e,!0))));if(t.v==="v1")return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer v1.`)}catch(t){throw console.error(t),new Error("Unknown data format.")}};function Zn(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map(function(r){r(n)}),(i=e.get("*"))&&i.slice().map(function(r){r(t,n)})}}}var Et,fr=Object.freeze({__proto__:null,default:Zn});function mr(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&e.__forceSmoothScrollPolyfill__!==!0)return;const n=e.HTMLElement||e.Element,i={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||l,scrollIntoView:n.prototype.scrollIntoView},r=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,o=(s=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(s)?1:0);var s;function l(g,f){this.scrollLeft=g,this.scrollTop=f}function a(g){if(g===null||typeof g!="object"||g.behavior===void 0||g.behavior==="auto"||g.behavior==="instant")return!0;if(typeof g=="object"&&g.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+g.behavior+" is not a valid value for enumeration ScrollBehavior.")}function u(g,f){return f==="Y"?g.clientHeight+o<g.scrollHeight:f==="X"?g.clientWidth+o<g.scrollWidth:void 0}function c(g,f){const C=e.getComputedStyle(g,null)["overflow"+f];return C==="auto"||C==="scroll"}function d(g){const f=u(g,"Y")&&c(g,"Y"),C=u(g,"X")&&c(g,"X");return f||C}function h(g){for(;g!==t.body&&d(g)===!1;)g=g.parentNode||g.host;return g}function y(g){let f,C,v,N=(r()-g.startTime)/468;var S;N=N>1?1:N,S=N,f=.5*(1-Math.cos(Math.PI*S)),C=g.startX+(g.x-g.startX)*f,v=g.startY+(g.y-g.startY)*f,g.method.call(g.scrollable,C,v),C===g.x&&v===g.y||e.requestAnimationFrame(y.bind(e,g))}function p(g,f,C){let v,N,S,M;const k=r();g===t.body?(v=e,N=e.scrollX||e.pageXOffset,S=e.scrollY||e.pageYOffset,M=i.scroll):(v=g,N=g.scrollLeft,S=g.scrollTop,M=l),y({scrollable:v,method:M,startTime:k,startX:N,startY:S,x:f,y:C})}e.scroll=e.scrollTo=function(){arguments[0]!==void 0&&(a(arguments[0])!==!0?p.call(e,t.body,arguments[0].left!==void 0?~~arguments[0].left:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:e.scrollY||e.pageYOffset):i.scroll.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:e.scrollX||e.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){arguments[0]!==void 0&&(a(arguments[0])?i.scrollBy.call(e,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0):p.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(a(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");return void i.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop)}const g=arguments[0].left,f=arguments[0].top;p.call(this,this,g===void 0?this.scrollLeft:~~g,f===void 0?this.scrollTop:~~f)},n.prototype.scrollBy=function(){arguments[0]!==void 0&&(a(arguments[0])!==!0?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(a(arguments[0])===!0)return void i.scrollIntoView.call(this,arguments[0]===void 0||arguments[0]);const g=h(this),f=g.getBoundingClientRect(),C=this.getBoundingClientRect();g!==t.body?(p.call(this,g,g.scrollLeft+C.left-f.left,g.scrollTop+C.top-f.top),e.getComputedStyle(g).position!=="fixed"&&e.scrollBy({left:f.left,top:f.top,behavior:"smooth"})):e.scrollBy({left:C.left,top:C.top,behavior:"smooth"})}}class yr{constructor(t=[],n){this.timeOffset=0,this.raf=null,this.actions=t,this.speed=n.speed,this.liveMode=n.liveMode}addAction(t){if(!this.actions.length||this.actions[this.actions.length-1].delay<=t.delay)return void this.actions.push(t);const n=this.findActionIndex(t);this.actions.splice(n,0,t)}start(){this.timeOffset=0;let t=performance.now();const n=()=>{const i=performance.now();for(this.timeOffset+=(i-t)*this.speed,t=i;this.actions.length;){const r=this.actions[0];if(!(this.timeOffset>=r.delay))break;this.actions.shift(),r.doAction()}(this.actions.length>0||this.liveMode)&&(this.raf=requestAnimationFrame(n))};this.raf=requestAnimationFrame(n)}clear(){this.raf&&(cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(t){this.speed=t}toggleLiveMode(t){this.liveMode=t}isActive(){return this.raf!==null}findActionIndex(t){let n=0,i=this.actions.length-1;for(;n<=i;){const r=Math.floor((n+i)/2);if(this.actions[r].delay<t.delay)n=r+1;else{if(!(this.actions[r].delay>t.delay))return r+1;i=r-1}}return n}}function Ke(e,t){if(e.type===P.IncrementalSnapshot&&e.data.source===O.MouseMove&&e.data.positions&&e.data.positions.length){const n=e.data.positions[0].timeOffset,i=e.timestamp+n;return e.delay=i-t,i-t}return e.delay=e.timestamp-t,e.delay}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ye(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(t===void 0||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Et||(Et={}));var Pn={type:"xstate.init"};function le(e){return e===void 0?[]:[].concat(e)}function Nt(e){return{type:"xstate.assign",assignment:e}}function ze(e,t){return typeof(e=typeof e=="string"&&t&&t[e]?t[e]:e)=="string"?{type:e}:typeof e=="function"?{type:e.name,exec:e}:e}function te(e){return function(t){return e===t}}function Kn(e){return typeof e=="string"?{type:e}:e}function He(e,t){return{value:e,context:t,actions:[],changed:!1,matches:te(e)}}function Qe(e,t,n){var i=t,r=!1;return[e.filter(function(o){if(o.type==="xstate.assign"){r=!0;var s=Object.assign({},i);return typeof o.assignment=="function"?s=o.assignment(i,n):Object.keys(o.assignment).forEach(function(l){s[l]=typeof o.assignment[l]=="function"?o.assignment[l](i,n):o.assignment[l]}),i=s,!1}return!0}),i,r]}function Yn(e,t){t===void 0&&(t={});var n=Ye(Qe(le(e.states[e.initial].entry).map(function(s){return ze(s,t.actions)}),e.context,Pn),2),i=n[0],r=n[1],o={config:e,_options:t,initialState:{value:e.initial,actions:i,context:r,matches:te(e.initial)},transition:function(s,l){var a,u,c=typeof s=="string"?{value:s,context:e.context}:s,d=c.value,h=c.context,y=Kn(l),p=e.states[d];if(p.on){var g=le(p.on[y.type]);try{for(var f=function(w){var _=typeof Symbol=="function"&&Symbol.iterator,R=_&&w[_],z=0;if(R)return R.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&z>=w.length&&(w=void 0),{value:w&&w[z++],done:!w}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),C=f.next();!C.done;C=f.next()){var v=C.value;if(v===void 0)return He(d,h);var N=typeof v=="string"?{target:v}:v,S=N.target,M=N.actions,k=M===void 0?[]:M,Z=N.cond,G=Z===void 0?function(){return!0}:Z,I=S===void 0,B=S??d,b=e.states[B];if(G(h,y)){var m=Ye(Qe((I?le(k):[].concat(p.exit,k,b.entry).filter(function(w){return w})).map(function(w){return ze(w,o._options.actions)}),h,y),3),D=m[0],E=m[1],Y=m[2],V=S??d;return{value:V,context:E,actions:D,changed:S!==d||D.length>0||Y,matches:te(V)}}}}catch(w){a={error:w}}finally{try{C&&!C.done&&(u=f.return)&&u.call(f)}finally{if(a)throw a.error}}}return He(d,h)}};return o}var je=function(e,t){return e.actions.forEach(function(n){var i=n.exec;return i&&i(e.context,t)})};function zn(e){var t=e.initialState,n=Et.NotStarted,i=new Set,r={_machine:e,send:function(o){n===Et.Running&&(t=e.transition(t,o),je(t,Kn(o)),i.forEach(function(s){return s(t)}))},subscribe:function(o){return i.add(o),o(t),{unsubscribe:function(){return i.delete(o)}}},start:function(o){if(o){var s=typeof o=="object"?o:{context:e.config.context,value:o};t={value:s.value,actions:[],context:s.context,matches:te(s.value)}}return n=Et.Running,je(t,Pn),r},stop:function(){return n=Et.Stopped,i.clear(),r},get state(){return t},get status(){return n}};return r}function vr(e,{getCastFn:t,applyEventsSynchronously:n,emitter:i}){const r=Yn({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Nt({lastPlayedEvent:(o,s)=>s.type==="CAST_EVENT"?s.payload.event:o.lastPlayedEvent}),recordTimeOffset:Nt((o,s)=>{let l=o.timeOffset;return"payload"in s&&"timeOffset"in s.payload&&(l=s.payload.timeOffset),Object.assign(Object.assign({},o),{timeOffset:l,baselineTime:o.events[0].timestamp+l})}),play(o){var s;const{timer:l,events:a,baselineTime:u,lastPlayedEvent:c}=o;l.clear();for(const p of a)Ke(p,u);const d=function(p,g){for(let f=p.length-1;f>=0;f--){const C=p[f];if(C.type===P.Meta&&C.timestamp<=g)return p.slice(f)}return p}(a,u);let h=c==null?void 0:c.timestamp;(c==null?void 0:c.type)===P.IncrementalSnapshot&&c.data.source===O.MouseMove&&(h=c.timestamp+((s=c.data.positions[0])===null||s===void 0?void 0:s.timeOffset)),u<(h||0)&&i.emit(W.PlayBack);const y=new Array;for(const p of d)if(!(h&&h<u&&(p.timestamp<=h||p===c)))if(p.timestamp<u)y.push(p);else{const g=t(p,!1);l.addAction({doAction:()=>{g()},delay:p.delay})}n(y),i.emit(W.Flush),l.start()},pause(o){o.timer.clear()},resetLastPlayedEvent:Nt(o=>Object.assign(Object.assign({},o),{lastPlayedEvent:null})),startLive:Nt({baselineTime:(o,s)=>(o.timer.toggleLiveMode(!0),o.timer.start(),s.type==="TO_LIVE"&&s.payload.baselineTime?s.payload.baselineTime:Date.now())}),addEvent:Nt((o,s)=>{const{baselineTime:l,timer:a,events:u}=o;if(s.type==="ADD_EVENT"){const{event:c}=s.payload;Ke(c,l);let d=u.length-1;if(!u[d]||u[d].timestamp<=c.timestamp)u.push(c);else{let p=-1,g=0;for(;g<=d;){const f=Math.floor((g+d)/2);u[f].timestamp<=c.timestamp?g=f+1:d=f-1}p===-1&&(p=g),u.splice(p,0,c)}const h=c.timestamp<l,y=t(c,h);h?y():a.isActive()&&a.addAction({doAction:()=>{y()},delay:c.delay})}return Object.assign(Object.assign({},o),{events:u})})}});return zn(r)}const Je=new Map;function Hn(e,t){let n=Je.get(e);return n||(n=new Map,Je.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}function gt(e,t,n){return i=>bt(this,void 0,void 0,function*(){if(i&&typeof i=="object"&&"rr_type"in i){if(n&&(n.isUnchanged=!1),i.rr_type==="ImageBitmap"&&"args"in i){const r=yield gt(e,t,n)(i.args);return yield createImageBitmap.apply(null,r)}if("index"in i){if(n||t===null)return i;const{rr_type:r,index:o}=i;return Hn(t,r)[o]}if("args"in i){const{rr_type:r,args:o}=i;return new window[r](...yield Promise.all(o.map(gt(e,t,n))))}if("base64"in i)return function(r){var o,s,l,a,u,c=.75*r.length,d=r.length,h=0;r[r.length-1]==="="&&(c--,r[r.length-2]==="="&&c--);var y=new ArrayBuffer(c),p=new Uint8Array(y);for(o=0;o<d;o+=4)s=_t[r.charCodeAt(o)],l=_t[r.charCodeAt(o+1)],a=_t[r.charCodeAt(o+2)],u=_t[r.charCodeAt(o+3)],p[h++]=s<<2|l>>4,p[h++]=(15&l)<<4|a>>2,p[h++]=(3&a)<<6|63&u;return y}(i.base64);if("src"in i){const r=e.get(i.src);if(r)return r;{const o=new Image;return o.src=i.src,e.set(i.src,o),o}}if("data"in i&&i.rr_type==="Blob"){const r=yield Promise.all(i.data.map(gt(e,t,n)));return new Blob(r,{type:i.type})}}else if(Array.isArray(i))return yield Promise.all(i.map(gt(e,t,n)));return i})}const Cr=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Ir({mutation:e,target:t,type:n,imageMap:i,errorHandler:r}){return bt(this,void 0,void 0,function*(){try{const o=function(a,u){try{return u===qt.WebGL?a.getContext("webgl")||a.getContext("experimental-webgl"):a.getContext("webgl2")}catch{return null}}(t,n);if(!o)return;if(e.setter)return void(o[e.property]=e.args[0]);const s=o[e.property],l=yield Promise.all(e.args.map(gt(i,o)));(function(a,u){if(!(u!=null&&u.constructor))return;const{name:c}=u.constructor;if(!Cr.includes(c))return;const d=Hn(a,c);d.includes(u)||d.push(u)})(o,s.apply(o,l))}catch(o){r(e,o)}})}function br({event:e,mutation:t,target:n,imageMap:i,errorHandler:r}){return bt(this,void 0,void 0,function*(){try{const o=n.getContext("2d");if(t.setter)return void(o[t.property]=t.args[0]);const s=o[t.property];if(t.property==="drawImage"&&typeof t.args[0]=="string")i.get(e),s.apply(o,t.args);else{const l=yield Promise.all(t.args.map(gt(i,o)));s.apply(o,l)}}catch(o){r(t,o)}})}function Xe({event:e,mutation:t,target:n,imageMap:i,canvasEventMap:r,errorHandler:o}){return bt(this,void 0,void 0,function*(){try{const s=r.get(e)||t,l="commands"in s?s.commands:[s];if([qt.WebGL,qt.WebGL2].includes(t.type)){for(let a=0;a<l.length;a++){const u=l[a];yield Ir({mutation:u,type:t.type,target:n,imageMap:i,errorHandler:o})}return}for(let a=0;a<l.length;a++){const u=l[a];yield br({event:e,mutation:u,target:n,imageMap:i,errorHandler:o})}}catch(s){o(t,s)}})}const wr=Zn||fr,ce={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function qe(e){return e.type==P.IncrementalSnapshot&&(e.data.source==O.TouchMove||e.data.source==O.MouseInteraction&&e.data.type==tt.TouchStart)}class Ar{constructor(t,n){if(this.usingVirtualDom=!1,this.virtualDom=new xt,this.mouseTail=null,this.tailPositions=[],this.emitter=wr(),this.legacy_missingNodeRetryMap={},this.cache=Oe(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=_i(),this.styleMirror=new Gi,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=l=>{this.iframe.style.display="inherit";for(const a of[this.mouseTail,this.iframe])a&&(a.setAttribute("width",String(l.width)),a.setAttribute("height",String(l.height)))},this.applyEventsSynchronously=l=>{for(const a of l){switch(a.type){case P.DomContentLoaded:case P.Load:case P.Custom:continue;case P.FullSnapshot:case P.Meta:case P.Plugin:case P.IncrementalSnapshot:}this.getCastFn(a,!0)()}this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null},this.getCastFn=(l,a=!1)=>{let u;switch(l.type){case P.DomContentLoaded:case P.Load:break;case P.Custom:u=()=>{this.emitter.emit(W.CustomEvent,l)};break;case P.Meta:u=()=>this.emitter.emit(W.Resize,{width:l.data.width,height:l.data.height});break;case P.FullSnapshot:u=()=>{var c;if(this.firstFullSnapshot){if(this.firstFullSnapshot===l)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(l,a),(c=this.iframe.contentWindow)===null||c===void 0||c.scrollTo(l.data.initialOffset),this.styleMirror.reset()};break;case P.IncrementalSnapshot:u=()=>{if(this.applyIncremental(l,a),!a&&(l===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const c of this.service.state.context.events)if(!(c.timestamp<=l.timestamp)&&this.isUserInteraction(c)){c.delay-l.delay>1e4*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=c);break}if(this.nextUserInteractionEvent){const c=this.nextUserInteractionEvent.delay-l.delay,d={speed:Math.min(Math.round(c/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:d}),this.emitter.emit(W.SkipStart,d)}}}}return()=>{u&&u();for(const d of this.config.plugins||[])d.handler&&d.handler(l,a,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:l}});const c=this.service.state.context.events.length-1;if(l===this.service.state.context.events[c]){const d=()=>{c<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(W.Finish))};l.type===P.IncrementalSnapshot&&l.data.source===O.MouseMove&&l.data.positions.length?setTimeout(()=>{d()},Math.max(0,50-l.data.positions[0].timeOffset)):d()}this.emitter.emit(W.EventCast,l)}},!(n!=null&&n.liveMode)&&t.length<2)throw new Error("Replayer need at least 2 events.");const i={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:ce,useVirtualDom:!0};this.config=Object.assign({},i,n),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(W.Resize,this.handleResize),this.setupDom();for(const l of this.config.plugins||[])l.getMirror&&l.getMirror({nodeMirror:this.mirror});this.emitter.on(W.Flush,()=>{if(this.usingVirtualDom){const l={mirror:this.mirror,applyCanvas:(a,u,c)=>{Xe({event:a,mutation:u,target:c,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(a,u)=>{a.source===O.StyleSheetRule?this.applyStyleSheetRule(a,u):a.source===O.StyleDeclaration&&this.applyStyleDeclaration(a,u)}};if(this.iframe.contentDocument&&lt(this.iframe.contentDocument,this.virtualDom,l,this.virtualDom.mirror),this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const a in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[a],c=fe(u.node,this.mirror,this.virtualDom.mirror);lt(c,u.node,l,this.virtualDom.mirror),u.node=c}catch(u){this.config.showWarning&&console.warn(u)}this.constructedStyleMutations.forEach(a=>{this.applyStyleSheetMutation(a)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(a=>{this.applyAdoptedStyleSheet(a)}),this.adoptedStyleSheets=[]}this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(W.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()});const r=new yr([],{speed:this.config.speed,liveMode:this.config.liveMode});this.service=vr({events:t.map(l=>n&&n.unpackFn?n.unpackFn(l):l).sort((l,a)=>l.timestamp-a.timestamp),timer:r,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(l=>{this.emitter.emit(W.StateChange,{player:l})}),this.speedService=zn(Yn({id:"speed",context:{normalSpeed:-1,timer:r},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(l,a)=>{"payload"in a&&l.timer.setSpeed(a.payload.speed)},recordSpeed:Nt({normalSpeed:l=>l.timer.speed}),restoreSpeed:l=>{l.timer.setSpeed(l.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe(l=>{this.emitter.emit(W.StateChange,{speed:l})});const o=this.service.state.context.events.find(l=>l.type===P.Meta),s=this.service.state.context.events.find(l=>l.type===P.FullSnapshot);if(o){const{width:l,height:a}=o.data;setTimeout(()=>{this.emitter.emit(W.Resize,{width:l,height:a})},0)}s&&setTimeout(()=>{var l;this.firstFullSnapshot||(this.firstFullSnapshot=s,this.rebuildFullSnapshot(s),(l=this.iframe.contentWindow)===null||l===void 0||l.scrollTo(s.data.initialOffset))},1),this.service.state.context.events.find(qe)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(t,n){return this.emitter.on(t,n),this}off(t,n){return this.emitter.off(t,n),this}setConfig(t){Object.keys(t).forEach(n=>{t[n],this.config[n]=t[n]}),this.config.skipInactive||this.backToNormal(),t.speed!==void 0&&this.speedService.send({type:"SET_SPEED",payload:{speed:t.speed}}),t.mouseTail!==void 0&&(t.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const t=this.service.state.context.events[0],n=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:t.timestamp,endTime:n.timestamp,totalTime:n.timestamp-t.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:t,events:n}=this.service.state.context;return t-n[0].timestamp}getMirror(){return this.mirror}play(t=0){var n,i;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:t}}),(i=(n=this.iframe.contentDocument)===null||n===void 0?void 0:n.getElementsByTagName("html")[0])===null||i===void 0||i.classList.remove("rrweb-paused"),this.emitter.emit(W.Start)}pause(t){var n,i;t===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof t=="number"&&(this.play(t),this.service.send({type:"PAUSE"})),(i=(n=this.iframe.contentDocument)===null||n===void 0?void 0:n.getElementsByTagName("html")[0])===null||i===void 0||i.classList.add("rrweb-paused"),this.emitter.emit(W.Pause)}resume(t=0){console.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(t),this.emitter.emit(W.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(W.Destroy)}startLive(t){this.service.send({type:"TO_LIVE",payload:{baselineTime:t}})}addEvent(t){const n=this.config.unpackFn?this.config.unpackFn(t):t;qe(n)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:n}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=Oe()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const t=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&t.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",t.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(mr(this.iframe.contentWindow,this.iframe.contentDocument),function(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...i)=>{let r=i[0];if(!(0 in i))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}(this.iframe.contentWindow))}rebuildFullSnapshot(t,n=!1){if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&console.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const i=[],r=(l,a)=>{this.collectIframeAndAttachDocument(i,l);for(const u of this.config.plugins||[])u.onBuild&&u.onBuild(l,{id:a,replayer:this})};Ui(t.data.node,{doc:this.iframe.contentDocument,afterAppend:r,cache:this.cache,mirror:this.mirror}),r(this.iframe.contentDocument,t.data.node.id);for(const{mutationInQueue:l,builtNode:a}of i)this.attachDocumentToIframe(l,a),this.newDocumentQueue=this.newDocumentQueue.filter(u=>u!==l);const{documentElement:o,head:s}=this.iframe.contentDocument;this.insertStyleRules(o,s),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(W.FullsnapshotRebuilded,t),n||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(t,n){var i;const r=(o=this.config.blockClass,[`.${o} { background: currentColor }`,"noscript { display: none !important; }"]).concat(this.config.insertStyleRules);var o;if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const s=this.virtualDom.createElement("style");this.virtualDom.mirror.add(s,_n(s,this.virtualDom.unserializedId)),t.insertBefore(s,n),s.rules.push({source:O.StyleSheetRule,adds:r.map((l,a)=>({rule:l,index:a}))})}else{const s=document.createElement("style");t.insertBefore(s,n);for(let l=0;l<r.length;l++)(i=s.sheet)===null||i===void 0||i.insertRule(r[l],l)}}attachDocumentToIframe(t,n){const i=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,r=[],o=(s,l)=>{this.collectIframeAndAttachDocument(r,s);const a=i.getMeta(s);if((a==null?void 0:a.type)===q.Element&&(a==null?void 0:a.tagName.toUpperCase())==="HTML"){const{documentElement:u,head:c}=n.contentDocument;this.insertStyleRules(u,c)}for(const u of this.config.plugins||[])u.onBuild&&u.onBuild(s,{id:l,replayer:this})};Vt(t.node,{doc:n.contentDocument,mirror:i,hackCss:!0,skipChild:!1,afterAppend:o,cache:this.cache}),o(n.contentDocument,t.node.id);for(const{mutationInQueue:s,builtNode:l}of r)this.attachDocumentToIframe(s,l),this.newDocumentQueue=this.newDocumentQueue.filter(a=>a!==s)}collectIframeAndAttachDocument(t,n){if(re(n,this.mirror)){const i=this.newDocumentQueue.find(r=>r.parentId===this.mirror.getId(n));i&&t.push({mutationInQueue:i,builtNode:n})}}waitForStylesheetLoad(){var t;const n=(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.head;if(n){const i=new Set;let r,o=this.service.state;const s=()=>{o=this.service.state};this.emitter.on(W.Start,s),this.emitter.on(W.Pause,s);const l=()=>{this.emitter.off(W.Start,s),this.emitter.off(W.Pause,s)};n.querySelectorAll('link[rel="stylesheet"]').forEach(a=>{a.sheet||(i.add(a),a.addEventListener("load",()=>{i.delete(a),i.size===0&&r!==-1&&(o.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(W.LoadStylesheetEnd),r&&clearTimeout(r),l())}))}),i.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(W.LoadStylesheetStart),r=setTimeout(()=>{o.matches("playing")&&this.play(this.getCurrentTime()),r=-1,l()},this.config.loadTimeout))}}preloadAllImages(){return bt(this,void 0,void 0,function*(){this.service.state;const t=()=>{this.service.state};this.emitter.on(W.Start,t),this.emitter.on(W.Pause,t);const n=[];for(const i of this.service.state.context.events)i.type===P.IncrementalSnapshot&&i.data.source===O.CanvasMutation&&(n.push(this.deserializeAndPreloadCanvasEvents(i.data,i)),("commands"in i.data?i.data.commands:[i.data]).forEach(r=>{this.preloadImages(r,i)}));return Promise.all(n)})}preloadImages(t,n){if(t.property==="drawImage"&&typeof t.args[0]=="string"&&!this.imageMap.has(n)){const i=document.createElement("canvas"),r=i.getContext("2d"),o=r==null?void 0:r.createImageData(i.width,i.height);o==null||o.data,JSON.parse(t.args[0]),r==null||r.putImageData(o,0,0)}}deserializeAndPreloadCanvasEvents(t,n){return bt(this,void 0,void 0,function*(){if(!this.canvasEventMap.has(n)){const i={isUnchanged:!0};if("commands"in t){const r=yield Promise.all(t.commands.map(o=>bt(this,void 0,void 0,function*(){const s=yield Promise.all(o.args.map(gt(this.imageMap,null,i)));return Object.assign(Object.assign({},o),{args:s})})));i.isUnchanged===!1&&this.canvasEventMap.set(n,Object.assign(Object.assign({},t),{commands:r}))}else{const r=yield Promise.all(t.args.map(gt(this.imageMap,null,i)));i.isUnchanged===!1&&this.canvasEventMap.set(n,Object.assign(Object.assign({},t),{args:r}))}}})}applyIncremental(t,n){var i,r,o;const{data:s}=t;switch(s.source){case O.Mutation:try{this.applyMutation(s,n)}catch(l){this.warn(`Exception in mutation ${l.message||l}`,s)}break;case O.Drag:case O.TouchMove:case O.MouseMove:if(n){const l=s.positions[s.positions.length-1];this.mousePos={x:l.x,y:l.y,id:l.id,debugData:s}}else s.positions.forEach(l=>{const a={doAction:()=>{this.moveAndHover(l.x,l.y,l.id,n,s)},delay:l.timeOffset+t.timestamp-this.service.state.context.baselineTime};this.timer.addAction(a)}),this.timer.addAction({doAction(){},delay:t.delay-((i=s.positions[0])===null||i===void 0?void 0:i.timeOffset)});break;case O.MouseInteraction:{if(s.id===-1||n)break;const l=new Event(tt[s.type].toLowerCase()),a=this.mirror.getNode(s.id);if(!a)return this.debugNodeNotFound(s,s.id);this.emitter.emit(W.MouseInteraction,{type:s.type,target:a});const{triggerFocus:u}=this.config;switch(s.type){case tt.Blur:"blur"in a&&a.blur();break;case tt.Focus:u&&a.focus&&a.focus({preventScroll:!0});break;case tt.Click:case tt.TouchStart:case tt.TouchEnd:n?(s.type===tt.TouchStart?this.touchActive=!0:s.type===tt.TouchEnd&&(this.touchActive=!1),this.mousePos={x:s.x,y:s.y,id:s.id,debugData:s}):(s.type===tt.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(s.x,s.y,s.id,n,s),s.type===tt.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):s.type===tt.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):s.type===tt.TouchEnd&&this.mouse.classList.remove("touch-active"));break;case tt.TouchCancel:n?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:a.dispatchEvent(l)}break}case O.Scroll:if(s.id===-1)break;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(s.id);if(!l)return this.debugNodeNotFound(s,s.id);l.scrollData=s;break}this.applyScroll(s,n);break;case O.ViewportResize:this.emitter.emit(W.Resize,{width:s.width,height:s.height});break;case O.Input:if(s.id===-1)break;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(s.id);if(!l)return this.debugNodeNotFound(s,s.id);l.inputData=s;break}this.applyInput(s);break;case O.MediaInteraction:{const l=this.usingVirtualDom?this.virtualDom.mirror.getNode(s.id):this.mirror.getNode(s.id);if(!l)return this.debugNodeNotFound(s,s.id);const a=l;try{s.currentTime&&(a.currentTime=s.currentTime),s.volume&&(a.volume=s.volume),s.muted&&(a.muted=s.muted),s.type===1&&a.pause(),s.type===0&&a.play(),s.type===4&&(a.playbackRate=s.playbackRate)}catch(u){this.config.showWarning&&console.warn(`Failed to replay media interactions: ${u.message||u}`)}break}case O.StyleSheetRule:case O.StyleDeclaration:this.usingVirtualDom?s.styleId?this.constructedStyleMutations.push(s):s.id&&((r=this.virtualDom.mirror.getNode(s.id))===null||r===void 0||r.rules.push(s)):this.applyStyleSheetMutation(s);break;case O.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const l=this.virtualDom.mirror.getNode(s.id);if(!l)return this.debugNodeNotFound(s,s.id);l.canvasMutations.push({event:t,mutation:s})}else{const l=this.mirror.getNode(s.id);if(!l)return this.debugNodeNotFound(s,s.id);Xe({event:t,mutation:s,target:l,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case O.Font:try{const l=new FontFace(s.family,s.buffer?new Uint8Array(JSON.parse(s.fontSource)):s.fontSource,s.descriptors);(o=this.iframe.contentDocument)===null||o===void 0||o.fonts.add(l)}catch(l){this.config.showWarning&&console.warn(l)}break;case O.Selection:if(n){this.lastSelectionData=s;break}this.applySelection(s);break;case O.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(s):this.applyAdoptedStyleSheet(s)}}applyMutation(t,n){if(this.config.useVirtualDom&&!this.usingVirtualDom&&n&&(this.usingVirtualDom=!0,sr(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const a in this.legacy_missingNodeRetryMap)try{const u=this.legacy_missingNodeRetryMap[a],c=Fn(u.node,this.virtualDom,this.mirror);c&&(u.node=c)}catch(u){this.config.showWarning&&console.warn(u)}const i=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;t.removes.forEach(a=>{var u;const c=i.getNode(a.id);if(!c)return t.removes.find(h=>h.id===a.parentId)?void 0:this.warnNodeNotFound(t,a.id);let d=i.getNode(a.parentId);if(!d)return this.warnNodeNotFound(t,a.parentId);if(a.isShadow&&Kt(d)&&(d=d.shadowRoot),i.removeNodeFromMap(c),d)try{d.removeChild(c),this.usingVirtualDom&&c.nodeName==="#text"&&d.nodeName==="STYLE"&&((u=d.rules)===null||u===void 0?void 0:u.length)>0&&(d.rules=[])}catch(h){if(!(h instanceof DOMException))throw h;this.warn("parent could not remove child in mutation",d,c,t)}});const r=Object.assign({},this.legacy_missingNodeRetryMap),o=[],s=a=>{var u;if(!this.iframe.contentDocument)return console.warn("Looks like your replayer has been destroyed.");let c=i.getNode(a.parentId);if(!c)return a.node.type===q.Document?this.newDocumentQueue.push(a):o.push(a);a.node.isShadow&&(Kt(c)||c.attachShadow({mode:"open"}),c=c.shadowRoot);let d=null,h=null;if(a.previousId&&(d=i.getNode(a.previousId)),a.nextId&&(h=i.getNode(a.nextId)),(C=>{let v=null;return C.nextId&&(v=i.getNode(C.nextId)),C.nextId!==null&&C.nextId!==void 0&&C.nextId!==-1&&!v})(a))return o.push(a);if(a.node.rootId&&!i.getNode(a.node.rootId))return;const y=a.node.rootId?i.getNode(a.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(re(c,i))return void this.attachDocumentToIframe(a,c);const p=(C,v)=>{for(const N of this.config.plugins||[])N.onBuild&&N.onBuild(C,{id:v,replayer:this})},g=Vt(a.node,{doc:y,mirror:i,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:p});if(a.previousId===-1||a.nextId===-1)return void(r[a.node.id]={node:g,mutation:a});const f=i.getMeta(c);if(f&&f.type===q.Element&&f.tagName==="textarea"&&a.node.type===q.Text){const C=Array.isArray(c.childNodes)?c.childNodes:Array.from(c.childNodes);for(const v of C)v.nodeType===c.TEXT_NODE&&c.removeChild(v)}if(d&&d.nextSibling&&d.nextSibling.parentNode)c.insertBefore(g,d.nextSibling);else if(h&&h.parentNode)c.contains(h)?c.insertBefore(g,h):c.insertBefore(g,null);else{if(c===y)for(;y.firstChild;)y.removeChild(y.firstChild);c.appendChild(g)}if(p(g,a.node.id),this.usingVirtualDom&&g.nodeName==="#text"&&c.nodeName==="STYLE"&&((u=c.rules)===null||u===void 0?void 0:u.length)>0&&(c.rules=[]),re(g,this.mirror)){const C=this.mirror.getId(g),v=this.newDocumentQueue.find(N=>N.parentId===C);v&&(this.attachDocumentToIframe(v,g),this.newDocumentQueue=this.newDocumentQueue.filter(N=>N!==v))}(a.previousId||a.nextId)&&this.legacy_resolveMissingNode(r,c,g,a)};t.adds.forEach(a=>{s(a)});const l=Date.now();for(;o.length;){const a=Wi(o);if(o.length=0,Date.now()-l>500){this.warn("Timeout in the loop, please check the resolve tree data:",a);break}for(const u of a)i.getNode(u.value.parentId)?Sn(u,c=>{s(c)}):this.debug("Drop resolve tree since there is no parent for the root node.",u)}Object.keys(r).length&&Object.assign(this.legacy_missingNodeRetryMap,r),function(a){const u=new Set,c=[];for(let d=a.length;d--;){const h=a[d];u.has(h.id)||(c.push(h),u.add(h.id))}return c}(t.texts).forEach(a=>{var u;const c=i.getNode(a.id);if(!c)return t.removes.find(d=>d.id===a.id)?void 0:this.warnNodeNotFound(t,a.id);if(c.textContent=a.value,this.usingVirtualDom){const d=c.parentNode;((u=d==null?void 0:d.rules)===null||u===void 0?void 0:u.length)>0&&(d.rules=[])}}),t.attributes.forEach(a=>{const u=i.getNode(a.id);if(!u)return t.removes.find(c=>c.id===a.id)?void 0:this.warnNodeNotFound(t,a.id);for(const c in a.attributes)if(typeof c=="string"){const d=a.attributes[c];if(d===null)u.removeAttribute(c);else if(typeof d=="string")try{if(c==="_cssText"&&(u.nodeName==="LINK"||u.nodeName==="STYLE"))try{const h=i.getMeta(u);Object.assign(h.attributes,a.attributes);const y=Vt(h,{doc:u.ownerDocument,mirror:i,skipChild:!0,hackCss:!0,cache:this.cache}),p=u.nextSibling,g=u.parentNode;if(y&&g){g.removeChild(u),g.insertBefore(y,p),i.replace(a.id,y);break}}catch{}u.setAttribute(c,d)}catch(h){this.config.showWarning&&console.warn("An error occurred may due to the checkout feature.",h)}else if(c==="style"){const h=d,y=u;for(const p in h)if(h[p]===!1)y.style.removeProperty(p);else if(h[p]instanceof Array){const g=h[p];y.style.setProperty(p,g[0],g[1])}else{const g=h[p];y.style.setProperty(p,g)}}}})}applyScroll(t,n){var i,r;const o=this.mirror.getNode(t.id);if(!o)return this.debugNodeNotFound(t,t.id);const s=this.mirror.getMeta(o);if(o===this.iframe.contentDocument)(i=this.iframe.contentWindow)===null||i===void 0||i.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"});else if((s==null?void 0:s.type)===q.Document)(r=o.defaultView)===null||r===void 0||r.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"});else try{o.scrollTo({top:t.y,left:t.x,behavior:n?"auto":"smooth"})}catch{}}applyInput(t){const n=this.mirror.getNode(t.id);if(!n)return this.debugNodeNotFound(t,t.id);try{n.checked=t.isChecked,n.value=t.text}catch{}}applySelection(t){try{const n=new Set,i=t.ranges.map(({start:r,startOffset:o,end:s,endOffset:l})=>{const a=this.mirror.getNode(r),u=this.mirror.getNode(s);if(!a||!u)return;const c=new Range;c.setStart(a,o),c.setEnd(u,l);const d=a.ownerDocument,h=d==null?void 0:d.getSelection();return h&&n.add(h),{range:c,selection:h}});n.forEach(r=>r.removeAllRanges()),i.forEach(r=>{var o;return r&&((o=r.selection)===null||o===void 0?void 0:o.addRange(r.range))})}catch{}}applyStyleSheetMutation(t){var n;let i=null;t.styleId?i=this.styleMirror.getStyle(t.styleId):t.id&&(i=((n=this.mirror.getNode(t.id))===null||n===void 0?void 0:n.sheet)||null),i&&(t.source===O.StyleSheetRule?this.applyStyleSheetRule(t,i):t.source===O.StyleDeclaration&&this.applyStyleDeclaration(t,i))}applyStyleSheetRule(t,n){var i,r,o,s;if((i=t.adds)===null||i===void 0||i.forEach(({rule:l,index:a})=>{try{if(Array.isArray(a)){const{positions:u,index:c}=Ve(a);Ft(n.cssRules,u).insertRule(l,c)}else{const u=a===void 0?void 0:Math.min(a,n.cssRules.length);n==null||n.insertRule(l,u)}}catch{}}),(r=t.removes)===null||r===void 0||r.forEach(({index:l})=>{try{if(Array.isArray(l)){const{positions:a,index:u}=Ve(l);Ft(n.cssRules,a).deleteRule(u||0)}else n==null||n.deleteRule(l)}catch{}}),t.replace)try{(o=n.replace)===null||o===void 0||o.call(n,t.replace)}catch{}if(t.replaceSync)try{(s=n.replaceSync)===null||s===void 0||s.call(n,t.replaceSync)}catch{}}applyStyleDeclaration(t,n){t.set&&Ft(n.rules,t.index).style.setProperty(t.set.property,t.set.value,t.set.priority),t.remove&&Ft(n.rules,t.index).style.removeProperty(t.remove.property)}applyAdoptedStyleSheet(t){var n;const i=this.mirror.getNode(t.id);if(!i)return;(n=t.styles)===null||n===void 0||n.forEach(s=>{var l;let a=null,u=null;if(Kt(i)?u=((l=i.ownerDocument)===null||l===void 0?void 0:l.defaultView)||null:i.nodeName==="#document"&&(u=i.defaultView),u)try{a=new u.CSSStyleSheet,this.styleMirror.add(a,s.styleId),this.applyStyleSheetRule({source:O.StyleSheetRule,adds:s.rules},a)}catch{}});let r=0;const o=(s,l)=>{const a=l.map(u=>this.styleMirror.getStyle(u)).filter(u=>u!==null);Kt(s)?s.shadowRoot.adoptedStyleSheets=a:s.nodeName==="#document"&&(s.adoptedStyleSheets=a),a.length!==l.length&&r<10&&(setTimeout(()=>o(s,l),0+100*r),r++)};o(i,t.styleIds)}legacy_resolveMissingNode(t,n,i,r){const{previousId:o,nextId:s}=r,l=o&&t[o],a=s&&t[s];if(l){const{node:u,mutation:c}=l;n.insertBefore(u,i),delete t[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(t,n,u,c)}if(a){const{node:u,mutation:c}=a;n.insertBefore(u,i.nextSibling),delete t[c.node.id],delete this.legacy_missingNodeRetryMap[c.node.id],(c.previousId||c.nextId)&&this.legacy_resolveMissingNode(t,n,u,c)}}moveAndHover(t,n,i,r,o){const s=this.mirror.getNode(i);if(!s)return this.debugNodeNotFound(o,i);const l=En(s,this.iframe),a=t*l.absoluteScale+l.x,u=n*l.absoluteScale+l.y;this.mouse.style.left=`${a}px`,this.mouse.style.top=`${u}px`,r||this.drawMouseTail({x:a,y:u}),this.hoverElements(s)}drawMouseTail(t){if(!this.mouseTail)return;const{lineCap:n,lineWidth:i,strokeStyle:r,duration:o}=this.config.mouseTail===!0?ce:Object.assign({},ce,this.config.mouseTail),s=()=>{if(!this.mouseTail)return;const l=this.mouseTail.getContext("2d");l&&this.tailPositions.length&&(l.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),l.beginPath(),l.lineWidth=i,l.lineCap=n,l.strokeStyle=r,l.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(a=>l.lineTo(a.x,a.y)),l.stroke())};this.tailPositions.push(t),s(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(l=>l!==t),s()},o/this.speedService.state.context.timer.speed)}hoverElements(t){var n;(n=this.iframe.contentDocument)===null||n===void 0||n.querySelectorAll(".\\:hover").forEach(r=>{r.classList.remove(":hover")});let i=t;for(;i;)i.classList&&i.classList.add(":hover"),i=i.parentElement}isUserInteraction(t){return t.type===P.IncrementalSnapshot&&t.data.source>O.Mutation&&t.data.source<=O.Input}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(W.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(t,n){this.warn(`Node with id '${n}' not found. `,t)}warnCanvasMutationFailed(t,n){this.warn("Has error on canvas update",n,"canvas mutation:",t)}debugNodeNotFound(t,n){this.debug("[replayer]",`Node with id '${n}' not found. `,t)}warn(...t){this.config.showWarning&&console.warn("[replayer]",...t)}debug(...t){this.config.showDebug&&console.log("[replayer]",...t)}}function tn(e){let t="";return Object.keys(e).forEach(n=>{t+=`${n}: ${e[n]};`}),t}function kt(e,t=2){let n=String(e);const i=Math.pow(10,t-1);if(e<i)for(;String(i).length>n.length;)n=`0${e}`;return n}function zt(e){if(e<=0)return"00:00";const t=Math.floor(e/36e5);e%=36e5;const n=Math.floor(e/6e4);e%=6e4;const i=Math.floor(e/1e3);return t?`${kt(t)}:${kt(n)}:${kt(i)}`:`${kt(n)}:${kt(i)}`}function en(){let e=!1;return["fullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement"].forEach(t=>{t in document&&(e=e||!!document[t])}),e}function nn(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}function Nr(e){return e.type===P.IncrementalSnapshot&&e.data.source>O.Mutation&&e.data.source<=O.Input}function Sr(e){let t,n,i,r,o,s,l,a,u;return{c(){t=X("div"),n=X("input"),i=et(),r=X("label"),o=et(),s=X("span"),l=wt(e[3]),T(n,"type","checkbox"),T(n,"id",e[2]),n.disabled=e[1],T(n,"class","svelte-9brlez"),T(r,"for",e[2]),T(r,"class","svelte-9brlez"),T(s,"class","label svelte-9brlez"),T(t,"class","switch svelte-9brlez"),Tt(t,"disabled",e[1])},m(c,d){ht(c,t,d),L(t,n),n.checked=e[0],L(t,i),L(t,r),L(t,o),L(t,s),L(s,l),a||(u=Ot(n,"change",e[4]),a=!0)},p(c,[d]){4&d&&T(n,"id",c[2]),2&d&&(n.disabled=c[1]),1&d&&(n.checked=c[0]),4&d&&T(r,"for",c[2]),8&d&&Xt(l,c[3]),2&d&&Tt(t,"disabled",c[1])},i:jt,o:jt,d(c){c&&ct(t),a=!1,u()}}}function Er(e,t,n){let{disabled:i}=t,{checked:r}=t,{id:o}=t,{label:s}=t;return e.$$set=l=>{"disabled"in l&&n(1,i=l.disabled),"checked"in l&&n(0,r=l.checked),"id"in l&&n(2,o=l.id),"label"in l&&n(3,s=l.label)},[r,i,o,s,function(){r=this.checked,n(0,r)}]}class Tr extends we{constructor(t){super(),be(this,t,Er,Sr,ve,{disabled:1,checked:0,id:2,label:3})}}function rn(e,t,n){const i=e.slice();return i[39]=t[n],i}function on(e,t,n){const i=e.slice();return i[42]=t[n],i}function sn(e,t,n){const i=e.slice();return i[45]=t[n],i}function an(e){let t,n,i,r,o,s,l,a,u,c,d,h,y,p,g,f,C,v,N,S,M,k,Z,G,I,B,b=zt(e[6])+"",m=zt(e[8].totalTime)+"",D=e[14],E=[];for(let A=0;A<D.length;A+=1)E[A]=ln(sn(e,D,A));let Y=e[9],V=[];for(let A=0;A<Y.length;A+=1)V[A]=cn(on(e,Y,A));function w(A,U){return A[7]==="playing"?Mr:Dr}let _=w(e),R=_(e),z=e[3],Q=[];for(let A=0;A<z.length;A+=1)Q[A]=un(rn(e,z,A));function st(A){e[30](A)}let J={id:"skip",disabled:e[10]==="skipping",label:"skip inactive"};return e[0]!==void 0&&(J.checked=e[0]),S=new Tr({props:J}),mt.push(()=>function(A,U,$){const at=A.$$.props[U];at!==void 0&&(A.$$.bound[at]=$,$(A.$$.ctx[at]))}(S,"checked",st)),{c(){t=X("div"),n=X("div"),i=X("span"),r=wt(b),o=et(),s=X("div"),l=X("div"),a=et();for(let A=0;A<E.length;A+=1)E[A].c();u=et();for(let A=0;A<V.length;A+=1)V[A].c();c=et(),d=X("div"),h=et(),y=X("span"),p=wt(m),g=et(),f=X("div"),C=X("button"),R.c(),v=et();for(let A=0;A<Q.length;A+=1)Q[A].c();N=et(),wn(S.$$.fragment),k=et(),Z=X("button"),Z.innerHTML=`<svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M916 380c-26.4 0-48-21.6-48-48L868 223.2 613.6 477.6c-18.4
            18.4-48.8 18.4-68 0-18.4-18.4-18.4-48.8 0-68L800 156 692 156c-26.4
            0-48-21.6-48-48 0-26.4 21.6-48 48-48l224 0c26.4 0 48 21.6 48 48l0
            224C964 358.4 942.4 380 916 380zM231.2 860l108.8 0c26.4 0 48 21.6 48
            48s-21.6 48-48 48l-224 0c-26.4 0-48-21.6-48-48l0-224c0-26.4 21.6-48
            48-48 26.4 0 48 21.6 48 48L164 792l253.6-253.6c18.4-18.4 48.8-18.4
            68 0 18.4 18.4 18.4 48.8 0 68L231.2 860z" p-id="1286"></path></svg>`,T(i,"class","rr-timeline__time svelte-19ke1iv"),T(l,"class","rr-progress__step svelte-19ke1iv"),j(l,"width",e[13]),T(d,"class","rr-progress__handler svelte-19ke1iv"),j(d,"left",e[13]),T(s,"class","rr-progress svelte-19ke1iv"),Tt(s,"disabled",e[10]==="skipping"),T(y,"class","rr-timeline__time svelte-19ke1iv"),T(n,"class","rr-timeline svelte-19ke1iv"),T(C,"class","svelte-19ke1iv"),T(Z,"class","svelte-19ke1iv"),T(f,"class","rr-controller__btns svelte-19ke1iv"),T(t,"class","rr-controller svelte-19ke1iv")},m(A,U){ht(A,t,U),L(t,n),L(n,i),L(i,r),L(n,o),L(n,s),L(s,l),e[27](l),L(s,a);for(let $=0;$<E.length;$+=1)E[$].m(s,null);L(s,u);for(let $=0;$<V.length;$+=1)V[$].m(s,null);L(s,c),L(s,d),e[28](s),L(n,h),L(n,y),L(y,p),L(t,g),L(t,f),L(f,C),R.m(C,null),L(f,v);for(let $=0;$<Q.length;$+=1)Q[$].m(f,null);L(f,N),Ce(S,f,null),L(f,k),L(f,Z),G=!0,I||(B=[Ot(s,"click",e[16]),Ot(C,"click",e[4]),Ot(Z,"click",e[31])],I=!0)},p(A,U){if((!G||64&U[0])&&b!==(b=zt(A[6])+"")&&Xt(r,b),(!G||8192&U[0])&&j(l,"width",A[13]),16384&U[0]){let x;for(D=A[14],x=0;x<D.length;x+=1){const it=sn(A,D,x);E[x]?E[x].p(it,U):(E[x]=ln(it),E[x].c(),E[x].m(s,u))}for(;x<E.length;x+=1)E[x].d(1);E.length=D.length}if(512&U[0]){let x;for(Y=A[9],x=0;x<Y.length;x+=1){const it=on(A,Y,x);V[x]?V[x].p(it,U):(V[x]=cn(it),V[x].c(),V[x].m(s,c))}for(;x<V.length;x+=1)V[x].d(1);V.length=Y.length}if((!G||8192&U[0])&&j(d,"left",A[13]),1024&U[0]&&Tt(s,"disabled",A[10]==="skipping"),(!G||256&U[0])&&m!==(m=zt(A[8].totalTime)+"")&&Xt(p,m),_!==(_=w(A))&&(R.d(1),R=_(A),R&&(R.c(),R.m(C,null))),1066&U[0]){let x;for(z=A[3],x=0;x<z.length;x+=1){const it=rn(A,z,x);Q[x]?Q[x].p(it,U):(Q[x]=un(it),Q[x].c(),Q[x].m(f,N))}for(;x<Q.length;x+=1)Q[x].d(1);Q.length=z.length}const $={};var at;1024&U[0]&&($.disabled=A[10]==="skipping"),!M&&1&U[0]&&(M=!0,$.checked=A[0],at=()=>M=!1,ue.push(at)),S.$set($)},i(A){G||(dt(S.$$.fragment,A),G=!0)},o(A){Dt(S.$$.fragment,A),G=!1},d(A){A&&ct(t),e[27](null),ne(E,A),ne(V,A),e[28](null),R.d(),ne(Q,A),Ie(S),I=!1,Mt(B)}}}function ln(e){let t,n;return{c(){t=X("div"),T(t,"title",n=e[45].name),j(t,"width",e[45].width),j(t,"height","4px"),j(t,"position","absolute"),j(t,"background",e[45].background),j(t,"left",e[45].position)},m(i,r){ht(i,t,r)},p(i,r){16384&r[0]&&n!==(n=i[45].name)&&T(t,"title",n),16384&r[0]&&j(t,"width",i[45].width),16384&r[0]&&j(t,"background",i[45].background),16384&r[0]&&j(t,"left",i[45].position)},d(i){i&&ct(t)}}}function cn(e){let t,n;return{c(){t=X("div"),T(t,"title",n=e[42].name),j(t,"width","10px"),j(t,"height","5px"),j(t,"position","absolute"),j(t,"top","2px"),j(t,"transform","translate(-50%, -50%)"),j(t,"background",e[42].background),j(t,"left",e[42].position)},m(i,r){ht(i,t,r)},p(i,r){512&r[0]&&n!==(n=i[42].name)&&T(t,"title",n),512&r[0]&&j(t,"background",i[42].background),512&r[0]&&j(t,"left",i[42].position)},d(i){i&&ct(t)}}}function Dr(e){let t,n;return{c(){t=Jt("svg"),n=Jt("path"),T(n,"d",`M170.65984 896l0-768 640 384zM644.66944
              512l-388.66944-233.32864 0 466.65728z`),T(t,"class","icon"),T(t,"viewBox","0 0 1024 1024"),T(t,"version","1.1"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),T(t,"width","16"),T(t,"height","16")},m(i,r){ht(i,t,r),L(t,n)},d(i){i&&ct(t)}}}function Mr(e){let t,n;return{c(){t=Jt("svg"),n=Jt("path"),T(n,"d",`M682.65984 128q53.00224 0 90.50112 37.49888t37.49888 90.50112l0
              512q0 53.00224-37.49888 90.50112t-90.50112
              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224
              37.49888-90.50112t90.50112-37.49888zM341.34016 128q53.00224 0
              90.50112 37.49888t37.49888 90.50112l0 512q0 53.00224-37.49888
              90.50112t-90.50112
              37.49888-90.50112-37.49888-37.49888-90.50112l0-512q0-53.00224
              37.49888-90.50112t90.50112-37.49888zM341.34016 213.34016q-17.67424
              0-30.16704 12.4928t-12.4928 30.16704l0 512q0 17.67424 12.4928
              30.16704t30.16704 12.4928 30.16704-12.4928
              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928zM682.65984
              213.34016q-17.67424 0-30.16704 12.4928t-12.4928 30.16704l0 512q0
              17.67424 12.4928 30.16704t30.16704 12.4928 30.16704-12.4928
              12.4928-30.16704l0-512q0-17.67424-12.4928-30.16704t-30.16704-12.4928z`),T(t,"class","icon"),T(t,"viewBox","0 0 1024 1024"),T(t,"version","1.1"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),T(t,"width","16"),T(t,"height","16")},m(i,r){ht(i,t,r),L(t,n)},d(i){i&&ct(t)}}}function un(e){let t,n,i,r,o,s,l=e[39]+"";function a(){return e[29](e[39])}return{c(){t=X("button"),n=wt(l),i=wt("x"),t.disabled=r=e[10]==="skipping",T(t,"class","svelte-19ke1iv"),Tt(t,"active",e[39]===e[1]&&e[10]!=="skipping")},m(u,c){ht(u,t,c),L(t,n),L(t,i),o||(s=Ot(t,"click",a),o=!0)},p(u,c){e=u,8&c[0]&&l!==(l=e[39]+"")&&Xt(n,l),1024&c[0]&&r!==(r=e[10]==="skipping")&&(t.disabled=r),1034&c[0]&&Tt(t,"active",e[39]===e[1]&&e[10]!=="skipping")},d(u){u&&ct(t),o=!1,s()}}}function xr(e){let t,n,i=e[2]&&an(e);return{c(){i&&i.c(),t=wt("")},m(r,o){i&&i.m(r,o),ht(r,t,o),n=!0},p(r,o){r[2]?i?(i.p(r,o),4&o[0]&&dt(i,1)):(i=an(r),i.c(),dt(i,1),i.m(t.parentNode,t)):i&&(In(),Dt(i,1,1,()=>{i=null}),bn())},i(r){n||(dt(i),n=!0)},o(r){Dt(i),n=!1},d(r){i&&i.d(r),r&&ct(t)}}}function dn(e,t,n){return(100-(t-n)/(t-e)*100).toFixed(2)}function Rr(e,t,n){const i=xi();let r,o,s,l,a,u,c,d,h,y,{replayer:p}=t,{showController:g}=t,{autoPlay:f}=t,{skipInactive:C}=t,{speedOption:v}=t,{speed:N=v.length?v[0]:1}=t,{tags:S={}}=t,{inactiveColor:M}=t,k=0,Z=null,G=!1,I=null;const B=()=>{Z&&(cancelAnimationFrame(Z),Z=null)},b=()=>{r==="paused"&&(a?(p.play(),a=!1):p.play(k))},m=()=>{r==="playing"&&(p.pause(),G=!1)},D=(w,_)=>{n(6,k=w),G=!1,(typeof _=="boolean"?_:r==="playing")?p.play(w):p.pause(w)},E=(w,_,R=!1,z)=>{I=R?{start:w,end:_}:null,n(6,k=w),G=_,u=z,p.play(w)},Y=w=>{let _=r==="playing";n(1,N=w),_&&p.pause(),p.setConfig({speed:N}),_&&p.play(k)};var V;return yn(()=>{n(7,r=p.service.state.value),n(10,o=p.speedService.state.value),p.on("state-change",w=>{const{player:_,speed:R}=w;if(_!=null&&_.value&&r!==_.value)switch(n(7,r=_.value),r){case"playing":B(),Z=requestAnimationFrame(function z(){n(6,k=p.getCurrentTime()),G&&k>=G&&(I?E(I.start,I.end,!0,void 0):(p.pause(),u&&(u(),u=null))),k<c.totalTime&&(Z=requestAnimationFrame(z))});break;case"paused":B()}R!=null&&R.value&&o!==R.value&&n(10,o=R.value)}),p.on("finish",()=>{a=!0,u&&(u(),u=null)}),f&&p.play()}),V=()=>{C!==p.config.skipInactive&&p.setConfig({skipInactive:C})},ee().$$.after_update.push(V),vn(()=>{p.pause(),B()}),e.$$set=w=>{"replayer"in w&&n(17,p=w.replayer),"showController"in w&&n(2,g=w.showController),"autoPlay"in w&&n(18,f=w.autoPlay),"skipInactive"in w&&n(0,C=w.skipInactive),"speedOption"in w&&n(3,v=w.speedOption),"speed"in w&&n(1,N=w.speed),"tags"in w&&n(19,S=w.tags),"inactiveColor"in w&&n(20,M=w.inactiveColor)},e.$$.update=()=>{if(64&e.$$.dirty[0]&&i("ui-update-current-time",{payload:k}),128&e.$$.dirty[0]&&i("ui-update-player-state",{payload:r}),131072&e.$$.dirty[0]&&n(8,c=p.getMetaData()),320&e.$$.dirty[0]){const w=Math.min(1,k/c.totalTime);n(13,d=100*w+"%"),i("ui-update-progress",{payload:w})}655360&e.$$.dirty[0]&&n(9,h=(()=>{const{context:w}=p.service.state,_=w.events.length,R=w.events[0].timestamp,z=w.events[_-1].timestamp,Q=[];return w.events.forEach(st=>{if(st.type===P.Custom){const J={name:st.data.tag,background:S[st.data.tag]||"rgb(73, 80, 246)",position:`${dn(R,z,st.timestamp)}%`};Q.push(J)}}),Q})()),1179648&e.$$.dirty[0]&&n(14,y=(()=>{try{const{context:w}=p.service.state,_=w.events.length,R=w.events[0].timestamp,z=w.events[_-1].timestamp,Q=function(J){const A=[];let U=J[0].timestamp;for(const $ of J)Nr($)&&($.timestamp-U>1e4&&A.push([U,$.timestamp]),U=$.timestamp);return A}(w.events),st=(J,A,U,$)=>(($-U)/(A-J)*100).toFixed(2);return Q.map(J=>({name:"inactive period",background:M,position:`${dn(R,z,J[0])}%`,width:`${st(R,z,J[0],J[1])}%`}))}catch{return[]}})())},[C,N,g,v,()=>{switch(r){case"playing":m();break;case"paused":b()}},Y,k,r,c,h,o,s,l,d,y,i,w=>{if(o==="skipping")return;const _=s.getBoundingClientRect();let R=(w.clientX-_.left)/_.width;R<0?R=0:R>1&&(R=1);const z=c.totalTime*R;a=!1,D(z)},p,f,S,M,b,m,D,E,()=>{n(0,C=!C)},()=>Promise.resolve().then(()=>{n(8,c=p.getMetaData())}),function(w){mt[w?"unshift":"push"](()=>{l=w,n(12,l)})},function(w){mt[w?"unshift":"push"](()=>{s=w,n(11,s)})},w=>Y(w),function(w){C=w,n(0,C)},()=>i("fullscreen")]}class kr extends we{constructor(t){super(),be(this,t,Rr,xr,ve,{replayer:17,showController:2,autoPlay:18,skipInactive:0,speedOption:3,speed:1,tags:19,inactiveColor:20,toggle:4,play:21,pause:22,goto:23,playRange:24,setSpeed:5,toggleSkipInactive:25,triggerUpdateMeta:26},null,[-1,-1])}get toggle(){return this.$$.ctx[4]}get play(){return this.$$.ctx[21]}get pause(){return this.$$.ctx[22]}get goto(){return this.$$.ctx[23]}get playRange(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[5]}get toggleSkipInactive(){return this.$$.ctx[25]}get triggerUpdateMeta(){return this.$$.ctx[26]}}function hn(e){let t,n,i={replayer:e[7],showController:e[3],autoPlay:e[1],speedOption:e[2],skipInactive:e[0],tags:e[4],inactiveColor:e[5]};return t=new kr({props:i}),e[32](t),t.$on("fullscreen",e[33]),{c(){wn(t.$$.fragment)},m(r,o){Ce(t,r,o),n=!0},p(r,o){const s={};128&o[0]&&(s.replayer=r[7]),8&o[0]&&(s.showController=r[3]),2&o[0]&&(s.autoPlay=r[1]),4&o[0]&&(s.speedOption=r[2]),1&o[0]&&(s.skipInactive=r[0]),16&o[0]&&(s.tags=r[4]),32&o[0]&&(s.inactiveColor=r[5]),t.$set(s)},i(r){n||(dt(t.$$.fragment,r),n=!0)},o(r){Dt(t.$$.fragment,r),n=!1},d(r){e[32](null),Ie(t,r)}}}function Br(e){let t,n,i,r,o=e[7]&&hn(e);return{c(){t=X("div"),n=X("div"),i=et(),o&&o.c(),T(n,"class","rr-player__frame"),T(n,"style",e[11]),T(t,"class","rr-player"),T(t,"style",e[12])},m(s,l){ht(s,t,l),L(t,n),e[31](n),L(t,i),o&&o.m(t,null),e[34](t),r=!0},p(s,l){(!r||2048&l[0])&&T(n,"style",s[11]),s[7]?o?(o.p(s,l),128&l[0]&&dt(o,1)):(o=hn(s),o.c(),dt(o,1),o.m(t,null)):o&&(In(),Dt(o,1,1,()=>{o=null}),bn()),(!r||4096&l[0])&&T(t,"style",s[12])},i(s){r||(dt(o),r=!0)},o(s){Dt(o),r=!1},d(s){s&&ct(t),e[31](null),o&&o.d(),e[34](null)}}}function Fr(e,t,n){let i,{width:r=1024}=t,{height:o=576}=t,{maxScale:s=1}=t,{events:l=[]}=t,{skipInactive:a=!0}=t,{autoPlay:u=!0}=t,{speedOption:c=[1,2,4,8]}=t,{speed:d=1}=t,{showController:h=!0}=t,{tags:y={}}=t,{inactiveColor:p="#D4D4D4"}=t,g,f,C,v,N,S,M=r,k=o;const Z=(I,B)=>{const b=[r/B.width,o/B.height];s&&b.push(s),I.style.transform=`scale(${Math.min(...b)})translate(-50%, -50%)`},G=()=>{var I;g&&(en()?document.exitFullscreen?document.exitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(I=g).requestFullscreen?I.requestFullscreen():I.mozRequestFullScreen?I.mozRequestFullScreen():I.webkitRequestFullscreen?I.webkitRequestFullscreen():I.msRequestFullscreen&&I.msRequestFullscreen())};return yn(()=>{if(c!==void 0&&nn(c)!=="array")throw new Error("speedOption must be array");if(c.forEach(B=>{if(nn(B)!=="number")throw new Error("item of speedOption must be number")}),c.indexOf(d)<0)throw new Error(`speed must be one of speedOption,
        current config:
        {
          ...
          speed: ${d},
          speedOption: [${c.toString()}]
          ...
        }
        `);var I;n(7,i=new Ar(l,Object.assign({speed:d,root:f,unpackFn:gr},t))),i.on("resize",B=>{Z(i.wrapper,B)}),I=()=>{en()?setTimeout(()=>{M=r,k=o,n(13,r=g.offsetWidth),n(14,o=g.offsetHeight-(h?80:0)),Z(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight})},0):(n(13,r=M),n(14,o=k),Z(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight}))},document.addEventListener("fullscreenchange",I),document.addEventListener("webkitfullscreenchange",I),document.addEventListener("mozfullscreenchange",I),document.addEventListener("MSFullscreenChange",I),C=()=>{document.removeEventListener("fullscreenchange",I),document.removeEventListener("webkitfullscreenchange",I),document.removeEventListener("mozfullscreenchange",I),document.removeEventListener("MSFullscreenChange",I)}}),vn(()=>{C&&C()}),e.$$set=I=>{n(39,t=xe(xe({},t),ke(I))),"width"in I&&n(13,r=I.width),"height"in I&&n(14,o=I.height),"maxScale"in I&&n(15,s=I.maxScale),"events"in I&&n(16,l=I.events),"skipInactive"in I&&n(0,a=I.skipInactive),"autoPlay"in I&&n(1,u=I.autoPlay),"speedOption"in I&&n(2,c=I.speedOption),"speed"in I&&n(17,d=I.speed),"showController"in I&&n(3,h=I.showController),"tags"in I&&n(4,y=I.tags),"inactiveColor"in I&&n(5,p=I.inactiveColor)},e.$$.update=()=>{24576&e.$$.dirty[0]&&n(11,N=tn({width:`${r}px`,height:`${o}px`})),24584&e.$$.dirty[0]&&n(12,S=tn({width:`${r}px`,height:`${o+(h?80:0)}px`}))},t=ke(t),[a,u,c,h,y,p,G,i,g,f,v,N,S,r,o,s,l,d,()=>i.getMirror(),()=>{Z(i.wrapper,{width:i.iframe.offsetWidth,height:i.iframe.offsetHeight})},(I,B)=>{switch(i.on(I,B),I){case"ui-update-current-time":case"ui-update-progress":case"ui-update-player-state":v.$on(I,({detail:b})=>B(b))}},I=>{i.addEvent(I),v.triggerUpdateMeta()},()=>i.getMetaData(),()=>i,()=>{v.toggle()},I=>{v.setSpeed(I)},()=>{v.toggleSkipInactive()},()=>{v.play()},()=>{v.pause()},(I,B)=>{v.goto(I,B)},(I,B,b=!1,m)=>{v.playRange(I,B,b,m)},function(I){mt[I?"unshift":"push"](()=>{f=I,n(9,f)})},function(I){mt[I?"unshift":"push"](()=>{v=I,n(10,v)})},()=>G(),function(I){mt[I?"unshift":"push"](()=>{g=I,n(8,g)})}]}class _r extends we{constructor(t){super(),be(this,t,Fr,Br,ve,{width:13,height:14,maxScale:15,events:16,skipInactive:0,autoPlay:1,speedOption:2,speed:17,showController:3,tags:4,inactiveColor:5,getMirror:18,triggerResize:19,toggleFullscreen:6,addEventListener:20,addEvent:21,getMetaData:22,getReplayer:23,toggle:24,setSpeed:25,toggleSkipInactive:26,play:27,pause:28,goto:29,playRange:30},null,[-1,-1])}get getMirror(){return this.$$.ctx[18]}get triggerResize(){return this.$$.ctx[19]}get toggleFullscreen(){return this.$$.ctx[6]}get addEventListener(){return this.$$.ctx[20]}get addEvent(){return this.$$.ctx[21]}get getMetaData(){return this.$$.ctx[22]}get getReplayer(){return this.$$.ctx[23]}get toggle(){return this.$$.ctx[24]}get setSpeed(){return this.$$.ctx[25]}get toggleSkipInactive(){return this.$$.ctx[26]}get play(){return this.$$.ctx[27]}get pause(){return this.$$.ctx[28]}get goto(){return this.$$.ctx[29]}get playRange(){return this.$$.ctx[30]}}class Or extends _r{constructor(t){super({target:t.target,props:t.data||t.props})}}const Lr={class:"loading h-3 w-3"},Wr=ni({__name:"replay",setup(e){const t=It(),n=It(),i=pn(()=>Zt.events),r=It(!1);ii(()=>{if(Zt.events.length<2)return Ee("/");const{clientHeight:a,clientWidth:u}=n.value,c=new Or({target:t.value,props:{events:i.value,mouseTail:!1,width:u,height:a-80,showController:!0,insertStyleRules:[`.rr-block {
          display: none !important
        }`,`main {
          background: rgba(var(--fill-default)) !important
        }`,`.markdown-item button::before {
          'mask-image': var(--un-icon) !important
        }`]}});ci(window,"resize",()=>{c.triggerResize()})});async function o(){if(!r.value){r.value=!0;const{data:a}=await Di("/api/export",{events:i.value},{responseType:"blob"});if(a.value){const u=URL.createObjectURL(a==null?void 0:a.value);ui(u,"è§†é¢‘.webm"),Zt.clear()}r.value=!1}}function s(){Zt.clear()}function l(){return Ee("/")}return(a,u)=>(ri(),oi("div",{ref_key:"container",ref:n,class:"relative h-90% w-90% center flex-col p-4 shadow-sm bg-default"},[Rt("div",{ref_key:"player",ref:t},[Rt("div",{class:"absolute bottom-3 right-2 z-9 center cursor-pointer gap-x-1 rounded p-1 text-xs bg-primary text-white",onClick:o},[si(Rt("div",Lr,null,512),[[ai,St(r)]]),li(" å¯¼å‡ºè§†é¢‘ ")]),Rt("div",{class:"absolute bottom-3 left-2 z-9 center cursor-pointer gap-x-1 rounded p-1 text-xs bg-primary text-white",onClick:s}," æ¸…ç©ºè®°å½• ")],512),Rt("div",{"i-ion-arrow-back-circle":"",class:"absolute top-0 cursor-pointer left-0 text-6 bg-primary",onClick:l})],512))}});export{Wr as default};
