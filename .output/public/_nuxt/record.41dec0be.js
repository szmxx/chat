var er=Object.defineProperty;var tr=(e,t,r)=>t in e?er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var De=(e,t,r)=>(tr(e,typeof t!="symbol"?t+"":t,r),r);import{z as rr,a1 as nr,a2 as or,r as ae,a3 as ir,N as kt,c as ar,Y as sr,o as lr,a4 as cr,R as ur}from"./entry.b11c0669.js";var dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function hr(e){return nr()?(or(e),!0):!1}function tt(e){return typeof e=="function"?e():rr(e)}const Ot=typeof window<"u",je=()=>{},pr=gr();function gr(){var e;return Ot&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function mr(e,t){function r(...n){return new Promise((o,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(o).catch(a)})}return r}const Tt=e=>e();function Ir(e=Tt){const t=ae(!0);function r(){t.value=!1}function n(){t.value=!0}const o=(...a)=>{t.value&&e(...a)};return{isActive:ir(t),pause:r,resume:n,eventFilter:o}}var it=Object.getOwnPropertySymbols,Cr=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable,Sr=(e,t)=>{var r={};for(var n in e)Cr.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&it)for(var n of it(e))t.indexOf(n)<0&&yr.call(e,n)&&(r[n]=e[n]);return r};function vr(e,t,r={}){const n=r,{eventFilter:o=Tt}=n,a=Sr(n,["eventFilter"]);return kt(e,mr(o,t),a)}var br=Object.defineProperty,Ar=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,at=(e,t,r)=>t in e?br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mr=(e,t)=>{for(var r in t||(t={}))Nt.call(t,r)&&at(e,r,t[r]);if(Ge)for(var r of Ge(t))Rt.call(t,r)&&at(e,r,t[r]);return e},kr=(e,t)=>Ar(e,wr(t)),Or=(e,t)=>{var r={};for(var n in e)Nt.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Ge)for(var n of Ge(e))t.indexOf(n)<0&&Rt.call(e,n)&&(r[n]=e[n]);return r};function Tr(e,t,r={}){const n=r,{eventFilter:o}=n,a=Or(n,["eventFilter"]),{eventFilter:l,pause:s,resume:i,isActive:u}=Ir(o);return{stop:vr(e,t,kr(Mr({},a),{eventFilter:l})),pause:s,resume:i,isActive:u}}function be(e){var t;const r=tt(e);return(t=r==null?void 0:r.$el)!=null?t:r}const Se=Ot?window:void 0;function de(...e){let t,r,n,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,n,o]=e,t=Se):[t,r,n,o]=e,!t)return je;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const a=[],l=()=>{a.forEach(c=>c()),a.length=0},s=(c,d,p,h)=>(c.addEventListener(d,p,h),()=>c.removeEventListener(d,p,h)),i=kt(()=>[be(t),tt(o)],([c,d])=>{l(),c&&a.push(...r.flatMap(p=>n.map(h=>s(c,p,h,d))))},{immediate:!0,flush:"post"}),u=()=>{i(),l()};return hr(u),u}let st=!1;function io(e,t,r={}){const{window:n=Se,ignore:o=[],capture:a=!0,detectIframe:l=!1}=r;if(!n)return;pr&&!st&&(st=!0,Array.from(n.document.body.children).forEach(p=>p.addEventListener("click",je)),n.document.documentElement.addEventListener("click",je));let s=!0;const i=p=>o.some(h=>{if(typeof h=="string")return Array.from(n.document.querySelectorAll(h)).some(f=>f===p.target||p.composedPath().includes(f));{const f=be(h);return f&&(p.target===f||p.composedPath().includes(f))}}),c=[de(n,"click",p=>{const h=be(e);if(!(!h||h===p.target||p.composedPath().includes(h))){if(p.detail===0&&(s=!i(p)),!s){s=!0;return}t(p)}},{passive:!0,capture:a}),de(n,"pointerdown",p=>{const h=be(e);h&&(s=!p.composedPath().includes(h)&&!i(p))},{passive:!0}),l&&de(n,"blur",p=>{setTimeout(()=>{var h;const f=be(e);((h=n.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!(f!=null&&f.contains(n.document.activeElement))&&t(p)},0)})].filter(Boolean);return()=>c.forEach(p=>p())}function Nr(){const e=ae(!1);return sr()&&lr(()=>{e.value=!0}),e}function Rr(e){const t=Nr();return ar(()=>(t.value,!!e()))}const Ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fe="__vueuse_ssr_handlers__",Dr=Er();function Er(){return Fe in Ee||(Ee[Fe]=Ee[Fe]||{}),Ee[Fe]}function Fr(e,t){return Dr[e]||t}function Lr(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var xr=Object.defineProperty,lt=Object.getOwnPropertySymbols,_r=Object.prototype.hasOwnProperty,Wr=Object.prototype.propertyIsEnumerable,ct=(e,t,r)=>t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ut=(e,t)=>{for(var r in t||(t={}))_r.call(t,r)&&ct(e,r,t[r]);if(lt)for(var r of lt(t))Wr.call(t,r)&&ct(e,r,t[r]);return e};const Br={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},dt="vueuse-storage";function Gr(e,t,r,n={}){var o;const{flush:a="pre",deep:l=!0,listenToStorageChanges:s=!0,writeDefaults:i=!0,mergeDefaults:u=!1,shallow:c,window:d=Se,eventFilter:p,onError:h=b=>{console.error(b)}}=n,f=(c?cr:ae)(t);if(!r)try{r=Fr("getDefaultStorage",()=>{var b;return(b=Se)==null?void 0:b.localStorage})()}catch(b){h(b)}if(!r)return f;const m=tt(t),T=Lr(m),D=(o=n.serializer)!=null?o:Br[T],{pause:v,resume:I}=Tr(f,()=>B(f.value),{flush:a,deep:l,eventFilter:p});return d&&s&&(de(d,"storage",Z),de(d,dt,V)),Z(),f;function B(b){try{if(b==null)r.removeItem(e);else{const N=D.write(b),w=r.getItem(e);w!==N&&(r.setItem(e,N),d&&d.dispatchEvent(new CustomEvent(dt,{detail:{key:e,oldValue:w,newValue:N,storageArea:r}})))}}catch(N){h(N)}}function G(b){const N=b?b.newValue:r.getItem(e);if(N==null)return i&&m!==null&&r.setItem(e,D.write(m)),m;if(!b&&u){const w=D.read(N);return typeof u=="function"?u(w,m):T==="object"&&!Array.isArray(w)?ut(ut({},m),w):w}else return typeof N!="string"?N:D.read(N)}function V(b){Z(b.detail)}function Z(b){if(!(b&&b.storageArea!==r)){if(b&&b.key==null){f.value=m;return}if(!(b&&b.key!==e)){v();try{f.value=G(b)}catch(N){h(N)}finally{b?ur(I):I()}}}}}function ao(e,t,r={}){const{window:n=Se}=r;return Gr(e,t,n==null?void 0:n.localStorage,r)}function Vr(e={}){const{window:t=Se}=e,r=t==null?void 0:t.navigator,n=Rr(()=>r&&"connection"in r),o=ae(!0),a=ae(!1),l=ae(void 0),s=ae(void 0),i=ae(void 0),u=ae(void 0),c=ae(void 0),d=ae(void 0),p=ae("unknown"),h=n.value&&r.connection;function f(){r&&(o.value=r.onLine,l.value=o.value?void 0:Date.now(),s.value=o.value?Date.now():void 0,h&&(i.value=h.downlink,u.value=h.downlinkMax,d.value=h.effectiveType,c.value=h.rtt,a.value=h.saveData,p.value=h.type))}return t&&(de(t,"offline",()=>{o.value=!1,l.value=Date.now()}),de(t,"online",()=>{o.value=!0,s.value=Date.now()})),h&&de(h,"change",f,!1),f(),{isSupported:n,isOnline:o,saveData:a,offlineAt:l,onlineAt:s,downlink:i,downlinkMax:u,effectiveType:d,rtt:c,type:p}}function so(e={}){const{isOnline:t}=Vr(e);return t}var Dt={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(dr,function(){var r=1e3,n=6e4,o=36e5,a="millisecond",l="second",s="minute",i="hour",u="day",c="week",d="month",p="quarter",h="year",f="date",m="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var y=["th","st","nd","rd"],g=A%100;return"["+A+(y[(g-20)%10]||y[g]||y[0])+"]"}},I=function(A,y,g){var S=String(A);return!S||S.length>=y?A:""+Array(y+1-S.length).join(g)+A},B={s:I,z:function(A){var y=-A.utcOffset(),g=Math.abs(y),S=Math.floor(g/60),C=g%60;return(y<=0?"+":"-")+I(S,2,"0")+":"+I(C,2,"0")},m:function A(y,g){if(y.date()<g.date())return-A(g,y);var S=12*(g.year()-y.year())+(g.month()-y.month()),C=y.clone().add(S,d),k=g-C<0,M=y.clone().add(S+(k?-1:1),d);return+(-(S+(g-C)/(k?C-M:M-C))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:d,y:h,w:c,d:u,D:f,h:i,m:s,s:l,ms:a,Q:p}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},G="en",V={};V[G]=v;var Z=function(A){return A instanceof z},b=function A(y,g,S){var C;if(!y)return G;if(typeof y=="string"){var k=y.toLowerCase();V[k]&&(C=k),g&&(V[k]=g,C=k);var M=y.split("-");if(!C&&M.length>1)return A(M[0])}else{var E=y.name;V[E]=y,C=E}return!S&&C&&(G=C),C||!S&&G},N=function(A,y){if(Z(A))return A.clone();var g=typeof y=="object"?y:{};return g.date=A,g.args=arguments,new z(g)},w=B;w.l=b,w.i=Z,w.w=function(A,y){return N(A,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var z=function(){function A(g){this.$L=b(g.locale,null,!0),this.parse(g)}var y=A.prototype;return y.parse=function(g){this.$d=function(S){var C=S.date,k=S.utc;if(C===null)return new Date(NaN);if(w.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var M=C.match(T);if(M){var E=M[2]-1||0,x=(M[7]||"0").substring(0,3);return k?new Date(Date.UTC(M[1],E,M[3]||1,M[4]||0,M[5]||0,M[6]||0,x)):new Date(M[1],E,M[3]||1,M[4]||0,M[5]||0,M[6]||0,x)}}return new Date(C)}(g),this.$x=g.x||{},this.init()},y.init=function(){var g=this.$d;this.$y=g.getFullYear(),this.$M=g.getMonth(),this.$D=g.getDate(),this.$W=g.getDay(),this.$H=g.getHours(),this.$m=g.getMinutes(),this.$s=g.getSeconds(),this.$ms=g.getMilliseconds()},y.$utils=function(){return w},y.isValid=function(){return this.$d.toString()!==m},y.isSame=function(g,S){var C=N(g);return this.startOf(S)<=C&&C<=this.endOf(S)},y.isAfter=function(g,S){return N(g)<this.startOf(S)},y.isBefore=function(g,S){return this.endOf(S)<N(g)},y.$g=function(g,S,C){return w.u(g)?this[S]:this.set(C,g)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(g,S){var C=this,k=!!w.u(S)||S,M=w.p(g),E=function(te,U){var O=w.w(C.$u?Date.UTC(C.$y,U,te):new Date(C.$y,U,te),C);return k?O:O.endOf(u)},x=function(te,U){return w.w(C.toDate()[te].apply(C.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(U)),C)},R=this.$W,K=this.$M,X=this.$D,se="set"+(this.$u?"UTC":"");switch(M){case h:return k?E(1,0):E(31,11);case d:return k?E(1,K):E(0,K+1);case c:var $=this.$locale().weekStart||0,ee=(R<$?R+7:R)-$;return E(k?X-ee:X+(6-ee),K);case u:case f:return x(se+"Hours",0);case i:return x(se+"Minutes",1);case s:return x(se+"Seconds",2);case l:return x(se+"Milliseconds",3);default:return this.clone()}},y.endOf=function(g){return this.startOf(g,!1)},y.$set=function(g,S){var C,k=w.p(g),M="set"+(this.$u?"UTC":""),E=(C={},C[u]=M+"Date",C[f]=M+"Date",C[d]=M+"Month",C[h]=M+"FullYear",C[i]=M+"Hours",C[s]=M+"Minutes",C[l]=M+"Seconds",C[a]=M+"Milliseconds",C)[k],x=k===u?this.$D+(S-this.$W):S;if(k===d||k===h){var R=this.clone().set(f,1);R.$d[E](x),R.init(),this.$d=R.set(f,Math.min(this.$D,R.daysInMonth())).$d}else E&&this.$d[E](x);return this.init(),this},y.set=function(g,S){return this.clone().$set(g,S)},y.get=function(g){return this[w.p(g)]()},y.add=function(g,S){var C,k=this;g=Number(g);var M=w.p(S),E=function(K){var X=N(k);return w.w(X.date(X.date()+Math.round(K*g)),k)};if(M===d)return this.set(d,this.$M+g);if(M===h)return this.set(h,this.$y+g);if(M===u)return E(1);if(M===c)return E(7);var x=(C={},C[s]=n,C[i]=o,C[l]=r,C)[M]||1,R=this.$d.getTime()+g*x;return w.w(R,this)},y.subtract=function(g,S){return this.add(-1*g,S)},y.format=function(g){var S=this,C=this.$locale();if(!this.isValid())return C.invalidDate||m;var k=g||"YYYY-MM-DDTHH:mm:ssZ",M=w.z(this),E=this.$H,x=this.$m,R=this.$M,K=C.weekdays,X=C.months,se=C.meridiem,$=function(U,O,J,L){return U&&(U[O]||U(S,k))||J[O].slice(0,L)},ee=function(U){return w.s(E%12||12,U,"0")},te=se||function(U,O,J){var L=U<12?"AM":"PM";return J?L.toLowerCase():L};return k.replace(D,function(U,O){return O||function(J){switch(J){case"YY":return String(S.$y).slice(-2);case"YYYY":return w.s(S.$y,4,"0");case"M":return R+1;case"MM":return w.s(R+1,2,"0");case"MMM":return $(C.monthsShort,R,X,3);case"MMMM":return $(X,R);case"D":return S.$D;case"DD":return w.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return $(C.weekdaysMin,S.$W,K,2);case"ddd":return $(C.weekdaysShort,S.$W,K,3);case"dddd":return K[S.$W];case"H":return String(E);case"HH":return w.s(E,2,"0");case"h":return ee(1);case"hh":return ee(2);case"a":return te(E,x,!0);case"A":return te(E,x,!1);case"m":return String(x);case"mm":return w.s(x,2,"0");case"s":return String(S.$s);case"ss":return w.s(S.$s,2,"0");case"SSS":return w.s(S.$ms,3,"0");case"Z":return M}return null}(U)||M.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(g,S,C){var k,M=this,E=w.p(S),x=N(g),R=(x.utcOffset()-this.utcOffset())*n,K=this-x,X=function(){return w.m(M,x)};switch(E){case h:k=X()/12;break;case d:k=X();break;case p:k=X()/3;break;case c:k=(K-R)/6048e5;break;case u:k=(K-R)/864e5;break;case i:k=K/o;break;case s:k=K/n;break;case l:k=K/r;break;default:k=K}return C?k:w.a(k)},y.daysInMonth=function(){return this.endOf(d).$D},y.$locale=function(){return V[this.$L]},y.locale=function(g,S){if(!g)return this.$L;var C=this.clone(),k=b(g,S,!0);return k&&(C.$L=k),C},y.clone=function(){return w.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},A}(),oe=z.prototype;return N.prototype=oe,[["$ms",a],["$s",l],["$m",s],["$H",i],["$W",u],["$M",d],["$y",h],["$D",f]].forEach(function(A){oe[A[1]]=function(y){return this.$g(y,A[0],A[1])}}),N.extend=function(A,y){return A.$i||(A(y,z,N),A.$i=!0),N},N.locale=b,N.isDayjs=Z,N.unix=function(A){return N(1e3*A)},N.en=V[G],N.Ls=V,N.p={},N})})(Dt);var Zr=Dt.exports;const ft=fr(Zr),lo=["小米","风尚","一只特立独行的猪","故城","零号机","风之子","星空漫步者","梦想家","琉璃心","雨中的思念","花开寂寞","温柔如水","逐梦者","纸飞机","时光倒流","青春纪念册","夜色微凉","浮生若梦","岁月如歌","心有猛虎","烟雨江南","悲伤逆流成河","幸福的小鸟","快乐的小猪","自由飞翔","阳光微笑","清风拂面","星光闪耀","梦想成真","幸运之星","快乐宝贝","甜蜜心情","幸福时光","微笑天使","勇往直前","热情洋溢","快乐旋律","幸福时光","甜蜜心情","幸福宝贝","微笑天使","勇往直前","热情洋溢","快乐旋律","幸福时光","甜蜜心情","幸福宝贝","微笑天使","勇往直前","热情洋溢","快乐旋律","幸福时光","甜蜜心情","幸福宝贝","微笑天使","勇往直前","热情洋溢","快乐旋律"],Ur={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},co=["#A1CCD1","#E9B384","#7C9D96","#FEBBCC","#D4E2D4","#4682A9","#DBC4F0","#91C8E4","#916DB3","#C8AE7D","#6C3428","#7A9D54","#FD8D14","#FBA1B7","#DAC0A3","#9ED2BE","#900C3F","#4469","#33BBC5","#E19898","#BEADFA","#F94C10","#614BC3"];function uo(e,t){const r=document.createElement("a");r.download=t,r.href=e,r.target="_blank",r.click(),URL.revokeObjectURL(e)}function fo(e,t){return Math.floor(Math.random()*(t-e+1))+e}function ho(){return/Android|webOS|iPhone|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Hr(e){const t=ft(),r=ft(e),n=t.diff(r,"day");if(n===0)return`${r.format("HH:mm")}`;if(n===1)return`昨天 ${r.format("HH:mm")}`;{const o=new Date(+e).getDay();return`星期${Ur[o]} ${r.format("HH:mm")}`}}function po(e){const t=new Date;return t.setDate(parseInt(e==null?void 0:e[0])),t.setHours(parseInt(e[1])),t.setMinutes(parseInt(e[2])),Hr(t.getTime())}var j;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(j||(j={}));function Kr(e){return e.nodeType===e.ELEMENT_NODE}function Ae(e){var t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function we(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function Pr(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function Yr(e){var t=e.cssText;if(t.split('"').length<3)return t;var r=["@import","url(".concat(JSON.stringify(e.href),")")];return e.layerName===""?r.push("layer"):e.layerName&&r.push("layer(".concat(e.layerName,")")),e.supportsText&&r.push("supports(".concat(e.supportsText,")")),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}function Ve(e){try{var t=e.rules||e.cssRules;return t?Pr(Array.from(t).map(Et).join("")):null}catch{return null}}function Et(e){var t;if(Jr(e))try{t=Ve(e.styleSheet)||Yr(e)}catch{}return zr(t||e.cssText)}function zr(e){if(e.includes(":")){var t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}return e}function Jr(e){return"styleSheet"in e}var Ft=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(t){var r;if(!t)return-1;var n=(r=this.getMeta(t))===null||r===void 0?void 0:r.id;return n??-1},e.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},e.prototype.removeNodeFromMap=function(t){var r=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(function(o){return r.removeNodeFromMap(o)})},e.prototype.has=function(t){return this.idNodeMap.has(t)},e.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},e.prototype.add=function(t,r){var n=r.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,r)},e.prototype.replace=function(t,r){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(r,o)}this.idNodeMap.set(t,r)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function $r(){return new Ft}function rt(e){var t=e.element,r=e.maskInputOptions,n=e.tagName,o=e.type,a=e.value,l=e.maskInputFn,s=a||"",i=o&&pe(o);return(r[n.toLowerCase()]||i&&r[i])&&(l?s=l(s,t):s="*".repeat(s.length)),s}function pe(e){return e.toLowerCase()}var ht="__rrweb_original__";function Qr(e){var t=e.getContext("2d");if(!t)return!0;for(var r=50,n=0;n<e.width;n+=r)for(var o=0;o<e.height;o+=r){var a=t.getImageData,l=ht in a?a[ht]:a,s=new Uint32Array(l.call(t,n,o,Math.min(r,e.width-n),Math.min(r,e.height-o)).data.buffer);if(s.some(function(i){return i!==0}))return!1}return!0}function nt(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?pe(t):null}var jr=1,Xr=new RegExp("[^a-z0-9-_:]"),ke=-2;function Lt(){return jr++}function qr(e){if(e instanceof HTMLFormElement)return"form";var t=pe(e.tagName);return Xr.test(t)?"div":t}function en(e){var t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var ge,pt,tn=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,rn=/^(?:[a-z+]+:)?\/\//i,nn=/^www\..*/i,on=/^(data:)([^,]*),(.*)/i;function Ze(e,t){return(e||"").replace(tn,function(r,n,o,a,l,s){var i=o||l||s,u=n||a||"";if(!i)return r;if(rn.test(i)||nn.test(i)||on.test(i))return"url(".concat(u).concat(i).concat(u,")");if(i[0]==="/")return"url(".concat(u).concat(en(t)+i).concat(u,")");var c=t.split("/"),d=i.split("/");c.pop();for(var p=0,h=d;p<h.length;p++){var f=h[p];f!=="."&&(f===".."?c.pop():c.push(f))}return"url(".concat(u).concat(c.join("/")).concat(u,")")})}var an=/^[^ \t\n\r\u000c]+/,sn=/^[, \t\n\r\u000c]+/;function ln(e,t){if(t.trim()==="")return t;var r=0;function n(u){var c,d=u.exec(t.substring(r));return d?(c=d[0],r+=c.length,c):""}for(var o=[];n(sn),!(r>=t.length);){var a=n(an);if(a.slice(-1)===",")a=Ie(e,a.substring(0,a.length-1)),o.push(a);else{var l="";a=Ie(e,a);for(var s=!1;;){var i=t.charAt(r);if(i===""){o.push((a+l).trim());break}else if(s)i===")"&&(s=!1);else if(i===","){r+=1,o.push((a+l).trim());break}else i==="("&&(s=!0);l+=i,r+=1}}}return o.join(", ")}function Ie(e,t){if(!t||t.trim()==="")return t;var r=e.createElement("a");return r.href=t,r.href}function cn(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function ot(){var e=document.createElement("a");return e.href="",e.href}function xt(e,t,r,n){return n&&(r==="src"||r==="href"&&!(t==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(t==="table"||t==="td"||t==="th")?Ie(e,n):r==="srcset"?ln(e,n):r==="style"?Ze(n,ot()):t==="object"&&r==="data"?Ie(e,n):n)}function _t(e,t,r){return(e==="video"||e==="audio")&&t==="autoplay"}function un(e,t,r){try{if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}if(r)return e.matches(r)}catch{}return!1}function Ue(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return r?Ue(e.parentNode,t,r):!1;for(var n=e.classList.length;n--;){var o=e.classList[n];if(t.test(o))return!0}return r?Ue(e.parentNode,t,r):!1}function Wt(e,t,r){try{var n=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(n===null)return!1;if(typeof t=="string"){if(n.classList.contains(t)||n.closest(".".concat(t)))return!0}else if(Ue(n,t,!0))return!0;if(r&&(n.matches(r)||n.closest(r)))return!0}catch{}return!1}function dn(e,t,r){var n=e.contentWindow;if(n){var o=!1,a;try{a=n.document.readyState}catch{return}if(a!=="complete"){var l=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(l),o=!0,t()});return}var s="about:blank";if(n.location.href!==s||e.src===s||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}function fn(e,t,r){var n=!1,o;try{o=e.sheet}catch{return}if(!o){var a=setTimeout(function(){n||(t(),n=!0)},r);e.addEventListener("load",function(){clearTimeout(a),n=!0,t()})}}function hn(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,a=t.blockSelector,l=t.maskTextClass,s=t.maskTextSelector,i=t.inlineStylesheet,u=t.maskInputOptions,c=u===void 0?{}:u,d=t.maskTextFn,p=t.maskInputFn,h=t.dataURLOptions,f=h===void 0?{}:h,m=t.inlineImages,T=t.recordCanvas,D=t.keepIframeSrcFn,v=t.newlyAddedElement,I=v===void 0?!1:v,B=pn(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:j.Document,childNodes:[],compatMode:e.compatMode}:{type:j.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:j.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:B};case e.ELEMENT_NODE:return mn(e,{doc:r,blockClass:o,blockSelector:a,inlineStylesheet:i,maskInputOptions:c,maskInputFn:p,dataURLOptions:f,inlineImages:m,recordCanvas:T,keepIframeSrcFn:D,newlyAddedElement:I,rootId:B});case e.TEXT_NODE:return gn(e,{maskTextClass:l,maskTextSelector:s,maskTextFn:d,rootId:B});case e.CDATA_SECTION_NODE:return{type:j.CDATA,textContent:"",rootId:B};case e.COMMENT_NODE:return{type:j.Comment,textContent:e.textContent||"",rootId:B};default:return!1}}function pn(e,t){if(t.hasNode(e)){var r=t.getId(e);return r===1?void 0:r}}function gn(e,t){var r,n=t.maskTextClass,o=t.maskTextSelector,a=t.maskTextFn,l=t.rootId,s=e.parentNode&&e.parentNode.tagName,i=e.textContent,u=s==="STYLE"?!0:void 0,c=s==="SCRIPT"?!0:void 0;if(u&&i){try{e.nextSibling||e.previousSibling||!((r=e.parentNode.sheet)===null||r===void 0)&&r.cssRules&&(i=Ve(e.parentNode.sheet))}catch(d){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(d),e)}i=Ze(i,ot())}return c&&(i="SCRIPT_PLACEHOLDER"),!u&&!c&&i&&Wt(e,n,o)&&(i=a?a(i):i.replace(/[\S]/g,"*")),{type:j.Text,textContent:i||"",isStyle:u,rootId:l}}function mn(e,t){for(var r=t.doc,n=t.blockClass,o=t.blockSelector,a=t.inlineStylesheet,l=t.maskInputOptions,s=l===void 0?{}:l,i=t.maskInputFn,u=t.dataURLOptions,c=u===void 0?{}:u,d=t.inlineImages,p=t.recordCanvas,h=t.keepIframeSrcFn,f=t.newlyAddedElement,m=f===void 0?!1:f,T=t.rootId,D=un(e,n,o),v=qr(e),I={},B=e.attributes.length,G=0;G<B;G++){var V=e.attributes[G];_t(v,V.name,V.value)||(I[V.name]=xt(r,v,pe(V.name),V.value))}if(v==="link"&&a){var Z=Array.from(r.styleSheets).find(function(x){return x.href===e.href}),b=null;Z&&(b=Ve(Z)),b&&(delete I.rel,delete I.href,I._cssText=Ze(b,Z.href))}if(v==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var b=Ve(e.sheet);b&&(I._cssText=Ze(b,ot()))}if(v==="input"||v==="textarea"||v==="select"){var N=e.value,w=e.checked;if(I.type!=="radio"&&I.type!=="checkbox"&&I.type!=="submit"&&I.type!=="button"&&N){var z=nt(e);I.value=rt({element:e,type:z,tagName:v,value:N,maskInputOptions:s,maskInputFn:i})}else w&&(I.checked=w)}if(v==="option"&&(e.selected&&!s.select?I.selected=!0:delete I.selected),v==="canvas"&&p){if(e.__context==="2d")Qr(e)||(I.rr_dataURL=e.toDataURL(c.type,c.quality));else if(!("__context"in e)){var oe=e.toDataURL(c.type,c.quality),A=document.createElement("canvas");A.width=e.width,A.height=e.height;var y=A.toDataURL(c.type,c.quality);oe!==y&&(I.rr_dataURL=oe)}}if(v==="img"&&d){ge||(ge=r.createElement("canvas"),pt=ge.getContext("2d"));var g=e,S=g.crossOrigin;g.crossOrigin="anonymous";var C=function(){g.removeEventListener("load",C);try{ge.width=g.naturalWidth,ge.height=g.naturalHeight,pt.drawImage(g,0,0),I.rr_dataURL=ge.toDataURL(c.type,c.quality)}catch(x){console.warn("Cannot inline img src=".concat(g.currentSrc,"! Error: ").concat(x))}S?I.crossOrigin=S:g.removeAttribute("crossorigin")};g.complete&&g.naturalWidth!==0?C():g.addEventListener("load",C)}if((v==="audio"||v==="video")&&(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop)),D){var k=e.getBoundingClientRect(),M=k.width,E=k.height;I={class:I.class,rr_width:"".concat(M,"px"),rr_height:"".concat(E,"px")}}return v==="iframe"&&!h(I.src)&&(e.contentDocument||(I.rr_src=I.src),delete I.src),{type:j.Element,tagName:v,attributes:I,childNodes:[],isSVG:cn(e)||void 0,needBlock:D,rootId:T}}function H(e){return e==null?"":e.toLowerCase()}function In(e,t){if(t.comment&&e.type===j.Comment)return!0;if(e.type===j.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(H(e.attributes.name).match(/^msapplication-tile(image|color)$/)||H(e.attributes.name)==="application-name"||H(e.attributes.rel)==="icon"||H(e.attributes.rel)==="apple-touch-icon"||H(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&H(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(H(e.attributes.property).match(/^(og|twitter|fb):/)||H(e.attributes.name).match(/^(og|twitter):/)||H(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(H(e.attributes.name)==="robots"||H(e.attributes.name)==="googlebot"||H(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(H(e.attributes.name)==="author"||H(e.attributes.name)==="generator"||H(e.attributes.name)==="framework"||H(e.attributes.name)==="publisher"||H(e.attributes.name)==="progid"||H(e.attributes.property).match(/^article:/)||H(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(H(e.attributes.name)==="google-site-verification"||H(e.attributes.name)==="yandex-verification"||H(e.attributes.name)==="csrf-token"||H(e.attributes.name)==="p:domain_verify"||H(e.attributes.name)==="verify-v1"||H(e.attributes.name)==="verification"||H(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ce(e,t){var r=t.doc,n=t.mirror,o=t.blockClass,a=t.blockSelector,l=t.maskTextClass,s=t.maskTextSelector,i=t.skipChild,u=i===void 0?!1:i,c=t.inlineStylesheet,d=c===void 0?!0:c,p=t.maskInputOptions,h=p===void 0?{}:p,f=t.maskTextFn,m=t.maskInputFn,T=t.slimDOMOptions,D=t.dataURLOptions,v=D===void 0?{}:D,I=t.inlineImages,B=I===void 0?!1:I,G=t.recordCanvas,V=G===void 0?!1:G,Z=t.onSerialize,b=t.onIframeLoad,N=t.iframeLoadTimeout,w=N===void 0?5e3:N,z=t.onStylesheetLoad,oe=t.stylesheetLoadTimeout,A=oe===void 0?5e3:oe,y=t.keepIframeSrcFn,g=y===void 0?function(){return!1}:y,S=t.newlyAddedElement,C=S===void 0?!1:S,k=t.preserveWhiteSpace,M=k===void 0?!0:k,E=hn(e,{doc:r,mirror:n,blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:s,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:m,dataURLOptions:v,inlineImages:B,recordCanvas:V,keepIframeSrcFn:g,newlyAddedElement:C});if(!E)return console.warn(e,"not serialized"),null;var x;n.hasNode(e)?x=n.getId(e):In(E,T)||!M&&E.type===j.Text&&!E.isStyle&&!E.textContent.replace(/^\s+|\s+$/gm,"").length?x=ke:x=Lt();var R=Object.assign(E,{id:x});if(n.add(e,R),x===ke)return null;Z&&Z(e);var K=!u;if(R.type===j.Element){K=K&&!R.needBlock,delete R.needBlock;var X=e.shadowRoot;X&&we(X)&&(R.isShadowHost=!0)}if((R.type===j.Document||R.type===j.Element)&&K){T.headWhitespace&&R.type===j.Element&&R.tagName==="head"&&(M=!1);for(var se={doc:r,mirror:n,blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:s,skipChild:u,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:m,slimDOMOptions:T,dataURLOptions:v,inlineImages:B,recordCanvas:V,preserveWhiteSpace:M,onSerialize:Z,onIframeLoad:b,iframeLoadTimeout:w,onStylesheetLoad:z,stylesheetLoadTimeout:A,keepIframeSrcFn:g},$=0,ee=Array.from(e.childNodes);$<ee.length;$++){var te=ee[$],U=Ce(te,se);U&&R.childNodes.push(U)}if(Kr(e)&&e.shadowRoot)for(var O=0,J=Array.from(e.shadowRoot.childNodes);O<J.length;O++){var te=J[O],U=Ce(te,se);U&&(we(e.shadowRoot)&&(U.isShadow=!0),R.childNodes.push(U))}}return e.parentNode&&Ae(e.parentNode)&&we(e.parentNode)&&(R.isShadow=!0),R.type===j.Element&&R.tagName==="iframe"&&dn(e,function(){var L=e.contentDocument;if(L&&b){var q=Ce(L,{doc:L,mirror:n,blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:s,skipChild:!1,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:m,slimDOMOptions:T,dataURLOptions:v,inlineImages:B,recordCanvas:V,preserveWhiteSpace:M,onSerialize:Z,onIframeLoad:b,iframeLoadTimeout:w,onStylesheetLoad:z,stylesheetLoadTimeout:A,keepIframeSrcFn:g});q&&b(e,q)}},w),R.type===j.Element&&R.tagName==="link"&&R.attributes.rel==="stylesheet"&&fn(e,function(){if(z){var L=Ce(e,{doc:r,mirror:n,blockClass:o,blockSelector:a,maskTextClass:l,maskTextSelector:s,skipChild:!1,inlineStylesheet:d,maskInputOptions:h,maskTextFn:f,maskInputFn:m,slimDOMOptions:T,dataURLOptions:v,inlineImages:B,recordCanvas:V,preserveWhiteSpace:M,onSerialize:Z,onIframeLoad:b,iframeLoadTimeout:w,onStylesheetLoad:z,stylesheetLoadTimeout:A,keepIframeSrcFn:g});L&&z(e,L)}},A),R}function Cn(e,t){var r=t||{},n=r.mirror,o=n===void 0?new Ft:n,a=r.blockClass,l=a===void 0?"rr-block":a,s=r.blockSelector,i=s===void 0?null:s,u=r.maskTextClass,c=u===void 0?"rr-mask":u,d=r.maskTextSelector,p=d===void 0?null:d,h=r.inlineStylesheet,f=h===void 0?!0:h,m=r.inlineImages,T=m===void 0?!1:m,D=r.recordCanvas,v=D===void 0?!1:D,I=r.maskAllInputs,B=I===void 0?!1:I,G=r.maskTextFn,V=r.maskInputFn,Z=r.slimDOM,b=Z===void 0?!1:Z,N=r.dataURLOptions,w=r.preserveWhiteSpace,z=r.onSerialize,oe=r.onIframeLoad,A=r.iframeLoadTimeout,y=r.onStylesheetLoad,g=r.stylesheetLoadTimeout,S=r.keepIframeSrcFn,C=S===void 0?function(){return!1}:S,k=B===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:B===!1?{password:!0}:B,M=b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b;return Ce(e,{doc:e,mirror:o,blockClass:l,blockSelector:i,maskTextClass:c,maskTextSelector:p,skipChild:!1,inlineStylesheet:f,maskInputOptions:k,maskTextFn:G,maskInputFn:V,slimDOMOptions:M,dataURLOptions:N,inlineImages:T,recordCanvas:v,preserveWhiteSpace:w,onSerialize:z,onIframeLoad:oe,iframeLoadTimeout:A,onStylesheetLoad:y,stylesheetLoadTimeout:g,keepIframeSrcFn:C,newlyAddedElement:!1})}function re(e,t,r=document){const n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}const me=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let gt={map:{},getId(){return console.error(me),-1},getNode(){return console.error(me),null},removeNodeFromMap(){console.error(me)},has(){return console.error(me),!1},reset(){console.error(me)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(gt=new Proxy(gt,{get(e,t,r){return t==="map"&&console.error(me),Reflect.get(e,t,r)}}));function Oe(e,t,r={}){let n=null,o=0;return function(...a){const l=Date.now();!o&&r.leading===!1&&(o=l);const s=t-(l-o),i=this;s<=0||s>t?(n&&(clearTimeout(n),n=null),o=l,e.apply(i,a)):!n&&r.trailing!==!1&&(n=setTimeout(()=>{o=r.leading===!1?0:Date.now(),n=null,e.apply(i,a)},s))}}function Ye(e,t,r,n,o=window){const a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,n?r:{set(l){setTimeout(()=>{r.set.call(this,l)},0),a&&a.set&&a.set.call(this,l)}}),()=>Ye(e,t,a||{},!0)}function Te(e,t,r){try{if(!(t in e))return()=>{};const n=e[t],o=r(n);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=o,()=>{e[t]=n}}catch{return()=>{}}}let He=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(He=()=>new Date().getTime());function Bt(e){var t,r,n,o,a,l;const s=e.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(s==null?void 0:s.documentElement.scrollLeft)||((r=(t=s==null?void 0:s.body)===null||t===void 0?void 0:t.parentElement)===null||r===void 0?void 0:r.scrollLeft)||((n=s==null?void 0:s.body)===null||n===void 0?void 0:n.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(s==null?void 0:s.documentElement.scrollTop)||((a=(o=s==null?void 0:s.body)===null||o===void 0?void 0:o.parentElement)===null||a===void 0?void 0:a.scrollTop)||((l=s==null?void 0:s.body)===null||l===void 0?void 0:l.scrollTop)||0}}function Gt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Vt(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ne(e,t,r,n){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;try{if(typeof t=="string"){if(o.classList.contains(t)||n&&o.closest("."+t)!==null)return!0}else if(Ue(o,t,n))return!0}catch{}return!!(r&&(o.matches(r)||n&&o.closest(r)!==null))}function yn(e,t){return t.getId(e)!==-1}function Je(e,t){return t.getId(e)===ke}function Zt(e,t){if(Ae(e))return!1;const r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Zt(e.parentNode,t):!0:!0}function Xe(e){return!!e.changedTouches}function Sn(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function Ut(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Ht(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function qe(e){return!!(e!=null&&e.shadowRoot)}class vn{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var r;return(r=this.styleIDMap.get(t))!==null&&r!==void 0?r:-1}has(t){return this.styleIDMap.has(t)}add(t,r){if(this.has(t))return this.getId(t);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Kt(e){var t,r;let n=null;return((r=(t=e.getRootNode)===null||t===void 0?void 0:t.call(e))===null||r===void 0?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(n=e.getRootNode().host),n}function bn(e){let t=e,r;for(;r=Kt(t);)t=r;return t}function An(e){const t=e.ownerDocument;if(!t)return!1;const r=bn(e);return t.contains(r)}function Pt(e){const t=e.ownerDocument;return t?t.contains(e)||An(e):!1}var W=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(W||{}),_=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(_||{}),ie=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ie||{}),ce=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ce||{}),ve=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(ve||{});function mt(e){return"__ln"in e}class wn{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<t;n++)r=(r==null?void 0:r.next)||null;return r}addNode(t){const r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&mt(t.previousSibling)){const n=t.previousSibling.__ln.next;r.next=n,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(t.nextSibling&&mt(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;r.previous=n,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(t){const r=t.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const It=(e,t)=>`${e}@${t}`;class Mn{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],r=new Set,n=new wn,o=i=>{let u=i,c=ke;for(;c===ke;)u=u&&u.nextSibling,c=u&&this.mirror.getId(u);return c},a=i=>{if(!i.parentNode||!Pt(i))return;const u=Ae(i.parentNode)?this.mirror.getId(Kt(i)):this.mirror.getId(i.parentNode),c=o(i);if(u===-1||c===-1)return n.addNode(i);const d=Ce(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{Ut(p,this.mirror)&&this.iframeManager.addIframe(p),Ht(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),qe(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(p,h)=>{this.iframeManager.attachIframe(p,h),this.shadowDomManager.observeAttachShadow(p)},onStylesheetLoad:(p,h)=>{this.stylesheetManager.attachLinkElement(p,h)}});d&&(t.push({parentId:u,nextId:c,node:d}),r.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const i of this.movedSet)Ct(this.removes,i,this.mirror)&&!this.movedSet.has(i.parentNode)||a(i);for(const i of this.addedSet)!yt(this.droppedSet,i)&&!Ct(this.removes,i,this.mirror)||yt(this.movedSet,i)?a(i):this.droppedSet.add(i);let l=null;for(;n.length;){let i=null;if(l){const u=this.mirror.getId(l.value.parentNode),c=o(l.value);u!==-1&&c!==-1&&(i=l)}if(!i){let u=n.tail;for(;u;){const c=u;if(u=u.previous,c){const d=this.mirror.getId(c.value.parentNode);if(o(c.value)===-1)continue;if(d!==-1){i=c;break}else{const h=c.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const f=h.parentNode.host;if(this.mirror.getId(f)!==-1){i=c;break}}}}}}if(!i){for(;n.head;)n.removeNode(n.head.value);break}l=i.previous,n.removeNode(i.value),a(i.value)}const s={texts:this.texts.map(i=>({id:this.mirror.getId(i.node),value:i.value})).filter(i=>!r.has(i.id)).filter(i=>this.mirror.has(i.id)),attributes:this.attributes.map(i=>{const{attributes:u}=i;if(typeof u.style=="string"){const c=JSON.stringify(i.styleDiff),d=JSON.stringify(i._unchangedStyles);c.length<u.style.length&&(c+d).split("var(").length===u.style.split("var(").length&&(u.style=i.styleDiff)}return{id:this.mirror.getId(i.node),attributes:u}}).filter(i=>!r.has(i.id)).filter(i=>this.mirror.has(i.id)),removes:this.removes,adds:t};!s.texts.length&&!s.attributes.length&&!s.removes.length&&!s.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=t=>{if(Je(t.target,this.mirror))return;let r;try{r=document.implementation.createHTMLDocument()}catch{r=this.doc}switch(t.type){case"characterData":{const n=t.target.textContent;!ne(t.target,this.blockClass,this.blockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Wt(t.target,this.maskTextClass,this.maskTextSelector)&&n?this.maskTextFn?this.maskTextFn(n):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let o=t.attributeName,a=t.target.getAttribute(o);if(o==="value"){const s=nt(n);a=rt({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:s,value:a,maskInputFn:this.maskInputFn})}if(ne(t.target,this.blockClass,this.blockSelector,!1)||a===t.oldValue)return;let l=this.attributes.find(s=>s.node===t.target);if(n.tagName==="IFRAME"&&o==="src"&&!this.keepIframeSrcFn(a))if(!n.contentDocument)o="rr_src";else return;if(l||(l={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(l)),o==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!_t(n.tagName,o)&&(l.attributes[o]=xt(this.doc,pe(n.tagName),pe(o),a),o==="style")){const s=r.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(const i of Array.from(n.style)){const u=n.style.getPropertyValue(i),c=n.style.getPropertyPriority(i);u!==s.style.getPropertyValue(i)||c!==s.style.getPropertyPriority(i)?c===""?l.styleDiff[i]=u:l.styleDiff[i]=[u,c]:l._unchangedStyles[i]=[u,c]}for(const i of Array.from(s.style))n.style.getPropertyValue(i)===""&&(l.styleDiff[i]=!1)}break}case"childList":{if(ne(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const o=this.mirror.getId(n),a=Ae(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);ne(t.target,this.blockClass,this.blockSelector,!1)||Je(n,this.mirror)||!yn(n,this.mirror)||(this.addedSet.has(n)?(et(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&o===-1||Zt(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[It(o,a)]?et(this.movedSet,n):this.removes.push({parentId:a,id:o,isShadow:Ae(t.target)&&we(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,r)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Je(t,this.mirror))return;this.movedSet.add(t);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[It(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);ne(t,this.blockClass,this.blockSelector,!1)||(t.childNodes.forEach(n=>this.genAdds(n)),qe(t)&&t.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function et(e,t){e.delete(t),t.childNodes.forEach(r=>et(e,r))}function Ct(e,t,r){return e.length===0?!1:Yt(e,t,r)}function Yt(e,t,r){const{parentNode:n}=t;if(!n)return!1;const o=r.getId(n);return e.some(a=>a.id===o)?!0:Yt(e,n,r)}function yt(e,t){return e.size===0?!1:zt(e,t)}function zt(e,t){const{parentNode:r}=t;return r?e.has(r)?!0:zt(e,r):!1}let Me;function kn(e){Me=e}function On(){Me=void 0}const F=e=>Me?(...r)=>{try{return e(...r)}catch(n){if(Me&&Me(n)===!0)return;throw n}}:e,he=[];function Ne(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Jt(e,t){var r,n;const o=new Mn;he.push(o),o.init(e);let a=window.MutationObserver||window.__rrMutationObserver;const l=(n=(r=window==null?void 0:window.Zone)===null||r===void 0?void 0:r.__symbol__)===null||n===void 0?void 0:n.call(r,"MutationObserver");l&&window[l]&&(a=window[l]);const s=new a(F(o.processMutations.bind(o)));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Tn({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,a=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let l=[],s;const i=Oe(F(d=>{const p=Date.now()-s;e(l.map(h=>(h.timeOffset-=p,h)),d),l=[],s=null}),a),u=F(Oe(F(d=>{const p=Ne(d),{clientX:h,clientY:f}=Xe(d)?d.changedTouches[0]:d;s||(s=He()),l.push({x:h,y:f,id:n.getId(p),timeOffset:He()-s}),i(typeof DragEvent<"u"&&d instanceof DragEvent?_.Drag:d instanceof MouseEvent?_.MouseMove:_.TouchMove)}),o,{trailing:!1})),c=[re("mousemove",u,r),re("touchmove",u,r),re("drag",u,r)];return F(()=>{c.forEach(d=>d())})}function Nn({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:a}){if(a.mouseInteraction===!1)return()=>{};const l=a.mouseInteraction===!0||a.mouseInteraction===void 0?{}:a.mouseInteraction,s=[];let i=null;const u=c=>d=>{const p=Ne(d);if(ne(p,n,o,!0))return;let h=null,f=c;if("pointerType"in d){switch(d.pointerType){case"mouse":h=ce.Mouse;break;case"touch":h=ce.Touch;break;case"pen":h=ce.Pen;break}h===ce.Touch?ie[c]===ie.MouseDown?f="TouchStart":ie[c]===ie.MouseUp&&(f="TouchEnd"):ce.Pen}else Xe(d)&&(h=ce.Touch);h!==null?(i=h,(f.startsWith("Touch")&&h===ce.Touch||f.startsWith("Mouse")&&h===ce.Mouse)&&(h=null)):ie[c]===ie.Click&&(h=i,i=null);const m=Xe(d)?d.changedTouches[0]:d;if(!m)return;const T=r.getId(p),{clientX:D,clientY:v}=m;F(e)(Object.assign({type:ie[f],id:T,x:D,y:v},h!==null&&{pointerType:h}))};return Object.keys(ie).filter(c=>Number.isNaN(Number(c))&&!c.endsWith("_Departed")&&l[c]!==!1).forEach(c=>{let d=pe(c);const p=u(c);if(window.PointerEvent)switch(ie[c]){case ie.MouseDown:case ie.MouseUp:d=d.replace("mouse","pointer");break;case ie.TouchStart:case ie.TouchEnd:return}s.push(re(d,p,t))}),F(()=>{s.forEach(c=>c())})}function $t({scrollCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,sampling:a}){const l=F(Oe(F(s=>{const i=Ne(s);if(!i||ne(i,n,o,!0))return;const u=r.getId(i);if(i===t&&t.defaultView){const c=Bt(t.defaultView);e({id:u,x:c.left,y:c.top})}else e({id:u,x:i.scrollLeft,y:i.scrollTop})}),a.scroll||100));return re("scroll",l,t)}function Rn({viewportResizeCb:e},{win:t}){let r=-1,n=-1;const o=F(Oe(F(()=>{const a=Gt(),l=Vt();(r!==a||n!==l)&&(e({width:Number(l),height:Number(a)}),r=a,n=l)}),200));return re("resize",o,t)}function St(e,t){const r=Object.assign({},e);return t||delete r.userTriggered,r}const Dn=["INPUT","TEXTAREA","SELECT"],vt=new WeakMap;function En({inputCb:e,doc:t,mirror:r,blockClass:n,blockSelector:o,ignoreClass:a,ignoreSelector:l,maskInputOptions:s,maskInputFn:i,sampling:u,userTriggeredOnInput:c}){function d(v){let I=Ne(v);const B=v.isTrusted,G=I&&I.tagName;if(I&&G==="OPTION"&&(I=I.parentElement),!I||!G||Dn.indexOf(G)<0||ne(I,n,o,!0)||I.classList.contains(a)||l&&I.matches(l))return;let V=I.value,Z=!1;const b=nt(I)||"";b==="radio"||b==="checkbox"?Z=I.checked:(s[G.toLowerCase()]||s[b])&&(V=rt({element:I,maskInputOptions:s,tagName:G,type:b,value:V,maskInputFn:i})),p(I,F(St)({text:V,isChecked:Z,userTriggered:B},c));const N=I.name;b==="radio"&&N&&Z&&t.querySelectorAll(`input[type="radio"][name="${N}"]`).forEach(w=>{w!==I&&p(w,F(St)({text:w.value,isChecked:!Z,userTriggered:!1},c))})}function p(v,I){const B=vt.get(v);if(!B||B.text!==I.text||B.isChecked!==I.isChecked){vt.set(v,I);const G=r.getId(v);F(e)(Object.assign(Object.assign({},I),{id:G}))}}const f=(u.input==="last"?["change"]:["input","change"]).map(v=>re(v,F(d),t)),m=t.defaultView;if(!m)return()=>{f.forEach(v=>v())};const T=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),D=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return T&&T.set&&f.push(...D.map(v=>Ye(v[0],v[1],{set(){F(d)({target:this,isTrusted:!1})}},!1,m))),F(()=>{f.forEach(v=>v())})}function Ke(e){const t=[];function r(n,o){if(Le("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||Le("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||Le("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||Le("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const l=Array.from(n.parentRule.cssRules).indexOf(n);o.unshift(l)}else if(n.parentStyleSheet){const l=Array.from(n.parentStyleSheet.cssRules).indexOf(n);o.unshift(l)}return o}return r(e,t)}function ue(e,t,r){let n,o;return e?(e.ownerNode?n=t.getId(e.ownerNode):o=r.getId(e),{styleId:o,id:n}):{}}function Fn({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const o=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:F((c,d,p)=>{const[h,f]=p,{id:m,styleId:T}=ue(d,t,r.styleMirror);return(m&&m!==-1||T&&T!==-1)&&e({id:m,styleId:T,adds:[{rule:h,index:f}]}),c.apply(d,p)})});const a=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:F((c,d,p)=>{const[h]=p,{id:f,styleId:m}=ue(d,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,removes:[{index:h}]}),c.apply(d,p)})});let l;n.CSSStyleSheet.prototype.replace&&(l=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:F((c,d,p)=>{const[h]=p,{id:f,styleId:m}=ue(d,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,replace:h}),c.apply(d,p)})}));let s;n.CSSStyleSheet.prototype.replaceSync&&(s=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:F((c,d,p)=>{const[h]=p,{id:f,styleId:m}=ue(d,t,r.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,replaceSync:h}),c.apply(d,p)})}));const i={};xe("CSSGroupingRule")?i.CSSGroupingRule=n.CSSGroupingRule:(xe("CSSMediaRule")&&(i.CSSMediaRule=n.CSSMediaRule),xe("CSSConditionRule")&&(i.CSSConditionRule=n.CSSConditionRule),xe("CSSSupportsRule")&&(i.CSSSupportsRule=n.CSSSupportsRule));const u={};return Object.entries(i).forEach(([c,d])=>{u[c]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(u[c].insertRule,{apply:F((p,h,f)=>{const[m,T]=f,{id:D,styleId:v}=ue(h.parentStyleSheet,t,r.styleMirror);return(D&&D!==-1||v&&v!==-1)&&e({id:D,styleId:v,adds:[{rule:m,index:[...Ke(h),T||0]}]}),p.apply(h,f)})}),d.prototype.deleteRule=new Proxy(u[c].deleteRule,{apply:F((p,h,f)=>{const[m]=f,{id:T,styleId:D}=ue(h.parentStyleSheet,t,r.styleMirror);return(T&&T!==-1||D&&D!==-1)&&e({id:T,styleId:D,removes:[{index:[...Ke(h),m]}]}),p.apply(h,f)})})}),F(()=>{n.CSSStyleSheet.prototype.insertRule=o,n.CSSStyleSheet.prototype.deleteRule=a,l&&(n.CSSStyleSheet.prototype.replace=l),s&&(n.CSSStyleSheet.prototype.replaceSync=s),Object.entries(i).forEach(([c,d])=>{d.prototype.insertRule=u[c].insertRule,d.prototype.deleteRule=u[c].deleteRule})})}function Qt({mirror:e,stylesheetManager:t},r){var n,o,a;let l=null;r.nodeName==="#document"?l=e.getId(r):l=e.getId(r.host);const s=r.nodeName==="#document"?(n=r.defaultView)===null||n===void 0?void 0:n.Document:(a=(o=r.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||a===void 0?void 0:a.ShadowRoot,i=Object.getOwnPropertyDescriptor(s==null?void 0:s.prototype,"adoptedStyleSheets");return l===null||l===-1||!s||!i?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){var u;return(u=i.get)===null||u===void 0?void 0:u.call(this)},set(u){var c;const d=(c=i.set)===null||c===void 0?void 0:c.call(this,u);if(l!==null&&l!==-1)try{t.adoptStyleSheets(u,l)}catch{}return d}}),F(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function Ln({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:n},{win:o}){const a=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:F((s,i,u)=>{var c;const[d,p,h]=u;if(r.has(d))return a.apply(i,[d,p,h]);const{id:f,styleId:m}=ue((c=i.parentRule)===null||c===void 0?void 0:c.parentStyleSheet,t,n.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,set:{property:d,value:p,priority:h},index:Ke(i.parentRule)}),s.apply(i,u)})});const l=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:F((s,i,u)=>{var c;const[d]=u;if(r.has(d))return l.apply(i,[d]);const{id:p,styleId:h}=ue((c=i.parentRule)===null||c===void 0?void 0:c.parentStyleSheet,t,n.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,remove:{property:d},index:Ke(i.parentRule)}),s.apply(i,u)})}),F(()=>{o.CSSStyleDeclaration.prototype.setProperty=a,o.CSSStyleDeclaration.prototype.removeProperty=l})}function xn({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:n,sampling:o,doc:a}){const l=F(i=>Oe(F(u=>{const c=Ne(u);if(!c||ne(c,t,r,!0))return;const{currentTime:d,volume:p,muted:h,playbackRate:f}=c;e({type:i,id:n.getId(c),currentTime:d,volume:p,muted:h,playbackRate:f})}),o.media||500)),s=[re("play",l(0),a),re("pause",l(1),a),re("seeked",l(2),a),re("volumechange",l(3),a),re("ratechange",l(4),a)];return F(()=>{s.forEach(i=>i())})}function _n({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const n=[],o=new WeakMap,a=r.FontFace;r.FontFace=function(i,u,c){const d=new a(i,u,c);return o.set(d,{family:i,buffer:typeof u!="string",descriptors:c,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),d};const l=Te(t.fonts,"add",function(s){return function(i){return setTimeout(F(()=>{const u=o.get(i);u&&(e(u),o.delete(i))}),0),s.apply(this,[i])}});return n.push(()=>{r.FontFace=a}),n.push(l),F(()=>{n.forEach(s=>s())})}function Wn(e){const{doc:t,mirror:r,blockClass:n,blockSelector:o,selectionCb:a}=e;let l=!0;const s=F(()=>{const i=t.getSelection();if(!i||l&&(i!=null&&i.isCollapsed))return;l=i.isCollapsed||!1;const u=[],c=i.rangeCount||0;for(let d=0;d<c;d++){const p=i.getRangeAt(d),{startContainer:h,startOffset:f,endContainer:m,endOffset:T}=p;ne(h,n,o,!0)||ne(m,n,o,!0)||u.push({start:r.getId(h),startOffset:f,end:r.getId(m),endOffset:T})}a({ranges:u})});return s(),re("selectionchange",s)}function Bn(e,t){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:o,scrollCb:a,viewportResizeCb:l,inputCb:s,mediaInteractionCb:i,styleSheetRuleCb:u,styleDeclarationCb:c,canvasMutationCb:d,fontCb:p,selectionCb:h}=e;e.mutationCb=(...f)=>{t.mutation&&t.mutation(...f),r(...f)},e.mousemoveCb=(...f)=>{t.mousemove&&t.mousemove(...f),n(...f)},e.mouseInteractionCb=(...f)=>{t.mouseInteraction&&t.mouseInteraction(...f),o(...f)},e.scrollCb=(...f)=>{t.scroll&&t.scroll(...f),a(...f)},e.viewportResizeCb=(...f)=>{t.viewportResize&&t.viewportResize(...f),l(...f)},e.inputCb=(...f)=>{t.input&&t.input(...f),s(...f)},e.mediaInteractionCb=(...f)=>{t.mediaInteaction&&t.mediaInteaction(...f),i(...f)},e.styleSheetRuleCb=(...f)=>{t.styleSheetRule&&t.styleSheetRule(...f),u(...f)},e.styleDeclarationCb=(...f)=>{t.styleDeclaration&&t.styleDeclaration(...f),c(...f)},e.canvasMutationCb=(...f)=>{t.canvasMutation&&t.canvasMutation(...f),d(...f)},e.fontCb=(...f)=>{t.font&&t.font(...f),p(...f)},e.selectionCb=(...f)=>{t.selection&&t.selection(...f),h(...f)}}function Gn(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};Bn(e,t);const n=Jt(e,e.doc),o=Tn(e),a=Nn(e),l=$t(e),s=Rn(e,{win:r}),i=En(e),u=xn(e),c=Fn(e,{win:r}),d=Qt(e,e.doc),p=Ln(e,{win:r}),h=e.collectFonts?_n(e):()=>{},f=Wn(e),m=[];for(const T of e.plugins)m.push(T.observer(T.callback,r,T.options));return F(()=>{he.forEach(T=>T.reset()),n.disconnect(),o(),a(),l(),s(),i(),u(),c(),d(),p(),h(),f(),m.forEach(T=>T())})}function Le(e){return typeof window[e]<"u"}function xe(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class bt{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,r,n,o){const a=n||this.getIdToRemoteIdMap(t),l=o||this.getRemoteIdToIdMap(t);let s=a.get(r);return s||(s=this.generateIdFn(),a.set(r,s),l.set(s,r)),s}getIds(t,r){const n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return r.map(a=>this.getId(t,a,n,o))}getRemoteId(t,r,n){const o=n||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;const a=o.get(r);return a||-1}getRemoteIds(t,r){const n=this.getRemoteIdToIdMap(t);return r.map(o=>this.getRemoteId(t,o,n))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){let r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}}class Vn{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new bt(Lt),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new bt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(n=this.loadListener)===null||n===void 0||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const r=t;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!t.source)return;const o=this.crossOriginIframeMap.get(t.source);if(!o)return;const a=this.transformCrossOriginEvent(o,r.data.event);a&&this.wrappedEmit(a,r.data.isCheckout)}transformCrossOriginEvent(t,r){var n;switch(r.type){case W.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t);const o=r.data.node.id;return this.crossOriginIframeRootIdMap.set(t,o),this.patchRootIdOnNode(r.data.node,o),{timestamp:r.timestamp,type:W.IncrementalSnapshot,data:{source:_.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case W.Meta:case W.Load:case W.DomContentLoaded:return!1;case W.Plugin:return r;case W.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case W.IncrementalSnapshot:switch(r.data.source){case _.Mutation:return r.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t);const a=this.crossOriginIframeRootIdMap.get(t);a&&this.patchRootIdOnNode(o.node,a)}),r.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),r.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),r.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case _.Drag:case _.TouchMove:case _.MouseMove:return r.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),r;case _.ViewportResize:return!1;case _.MediaInteraction:case _.MouseInteraction:case _.Scroll:case _.CanvasMutation:case _.Input:return this.replaceIds(r.data,t,["id"]),r;case _.StyleSheetRule:case _.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case _.Font:return r;case _.Selection:return r.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),r;case _.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(n=r.data.styles)===null||n===void 0||n.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),r}}}replace(t,r,n,o){for(const a of o)!Array.isArray(r[a])&&typeof r[a]!="number"||(Array.isArray(r[a])?r[a]=t.getIds(n,r[a]):r[a]=t.getId(n,r[a]));return r}replaceIds(t,r,n){return this.replace(this.crossOriginIframeMirror,t,r,n)}replaceStyleIds(t,r,n){return this.replace(this.crossOriginIframeStyleMirror,t,r,n)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(t,r){t.type!==j.Document&&!t.rootId&&(t.rootId=r),"childNodes"in t&&t.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}}class Zn{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,r){if(!we(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=Jt(Object.assign(Object.assign({},this.bypassOptions),{doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push($t(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Qt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,r){const n=this;this.restoreHandlers.push(Te(t.prototype,"attachShadow",function(o){return function(a){const l=o.call(this,a);return this.shadowRoot&&Pt(this)&&n.addShadowRoot(this.shadowRoot,r),l}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Un(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Hn(e,t,r,n){function o(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function s(c){try{u(n.next(c))}catch(d){l(d)}}function i(c){try{u(n.throw(c))}catch(d){l(d)}}function u(c){c.done?a(c.value):o(c.value).then(s,i)}u((n=n.apply(e,t||[])).next())})}var ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _e=0;_e<ye.length;_e++)Kn[ye.charCodeAt(_e)]=_e;var Pn=function(e){var t=new Uint8Array(e),r,n=t.length,o="";for(r=0;r<n;r+=3)o+=ye[t[r]>>2],o+=ye[(t[r]&3)<<4|t[r+1]>>4],o+=ye[(t[r+1]&15)<<2|t[r+2]>>6],o+=ye[t[r+2]&63];return n%3===2?o=o.substring(0,o.length-1)+"=":n%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const At=new Map;function Yn(e,t){let r=At.get(e);return r||(r=new Map,At.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}const jt=(e,t,r)=>{if(!e||!(qt(e,t)||typeof e=="object"))return;const n=e.constructor.name,o=Yn(r,n);let a=o.indexOf(e);return a===-1&&(a=o.length,o.push(e)),a};function We(e,t,r){if(e instanceof Array)return e.map(n=>We(n,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const n=e.constructor.name,o=Pn(e);return{rr_type:n,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[We(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const n=e.constructor.name,{src:o}=e;return{rr_type:n,src:o}}else if(e instanceof HTMLCanvasElement){const n="HTMLImageElement",o=e.toDataURL();return{rr_type:n,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[We(e.data,t,r),e.width,e.height]};if(qt(e,t)||typeof e=="object"){const n=e.constructor.name,o=jt(e,t,r);return{rr_type:n,index:o}}}}return e}const Xt=(e,t,r)=>[...e].map(n=>We(n,t,r)),qt=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function zn(e,t,r,n){const o=[],a=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const l of a)try{if(typeof t.CanvasRenderingContext2D.prototype[l]!="function")continue;const s=Te(t.CanvasRenderingContext2D.prototype,l,function(i){return function(...u){return ne(this.canvas,r,n,!0)||setTimeout(()=>{const c=Xt([...u],t,this);e(this.canvas,{type:ve["2D"],property:l,args:c})},0),i.apply(this,u)}});o.push(s)}catch{const i=Ye(t.CanvasRenderingContext2D.prototype,l,{set(u){e(this.canvas,{type:ve["2D"],property:l,args:[u],setter:!0})}});o.push(i)}return()=>{o.forEach(l=>l())}}function Jn(e){return e==="experimental-webgl"?"webgl":e}function wt(e,t,r,n){const o=[];try{const a=Te(e.HTMLCanvasElement.prototype,"getContext",function(l){return function(s,...i){if(!ne(this,t,r,!0)){const u=Jn(s);if("__context"in this||(this.__context=u),n&&["webgl","webgl2"].includes(u))if(i[0]&&typeof i[0]=="object"){const c=i[0];c.preserveDrawingBuffer||(c.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return l.apply(this,[s,...i])}});o.push(a)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(a=>a())}}function Mt(e,t,r,n,o,a,l){const s=[],i=Object.getOwnPropertyNames(e);for(const u of i)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(u))try{if(typeof e[u]!="function")continue;const c=Te(e,u,function(d){return function(...p){const h=d.apply(this,p);if(jt(h,l,this),"tagName"in this.canvas&&!ne(this.canvas,n,o,!0)){const f=Xt([...p],l,this),m={type:t,property:u,args:f};r(this.canvas,m)}return h}});s.push(c)}catch{const d=Ye(e,u,{set(p){r(this.canvas,{type:t,property:u,args:[p],setter:!0})}});s.push(d)}return s}function $n(e,t,r,n,o){const a=[];return a.push(...Mt(t.WebGLRenderingContext.prototype,ve.WebGL,e,r,n,o,t)),typeof t.WebGL2RenderingContext<"u"&&a.push(...Mt(t.WebGL2RenderingContext.prototype,ve.WebGL2,e,r,n,o,t)),()=>{a.forEach(l=>l())}}function Qn(e,t){var r=atob(e);if(t){for(var n=new Uint8Array(r.length),o=0,a=r.length;o<a;++o)n[o]=r.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return r}function jn(e,t,r){var n=t===void 0?null:t,o=r===void 0?!1:r,a=Qn(e,o),l=a.indexOf(`
`,10)+1,s=a.substring(l)+(n?"//# sourceMappingURL="+n:""),i=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(i)}function Xn(e,t,r){var n;return function(a){return n=n||jn(e,t,r),new Worker(n,a)}}var qn=Xn("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,!1);class eo{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(i,u)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(i)||this.pendingCanvasMutations.set(i,[]),this.pendingCanvasMutations.get(i).push(u)};const{sampling:r="all",win:n,blockClass:o,blockSelector:a,recordCanvas:l,dataURLOptions:s}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,l&&r==="all"&&this.initCanvasMutationObserver(n,o,a),l&&typeof r=="number"&&this.initCanvasFPSObserver(r,n,o,a,{dataURLOptions:s})}initCanvasFPSObserver(t,r,n,o,a){const l=wt(r,n,o,!0),s=new Map,i=new qn;i.onmessage=f=>{const{id:m}=f.data;if(s.set(m,!1),!("base64"in f.data))return;const{base64:T,type:D,width:v,height:I}=f.data;this.mutationCb({id:m,type:ve["2D"],commands:[{property:"clearRect",args:[0,0,v,I]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:T}],type:D}]},0,0]}]})};const u=1e3/t;let c=0,d;const p=()=>{const f=[];return r.document.querySelectorAll("canvas").forEach(m=>{ne(m,n,o,!0)||f.push(m)}),f},h=f=>{if(c&&f-c<u){d=requestAnimationFrame(h);return}c=f,p().forEach(m=>Hn(this,void 0,void 0,function*(){var T;const D=this.mirror.getId(m);if(s.get(D))return;if(s.set(D,!0),["webgl","webgl2"].includes(m.__context)){const I=m.getContext(m.__context);((T=I==null?void 0:I.getContextAttributes())===null||T===void 0?void 0:T.preserveDrawingBuffer)===!1&&I.clear(I.COLOR_BUFFER_BIT)}const v=yield createImageBitmap(m);i.postMessage({id:D,bitmap:v,width:m.width,height:m.height,dataURLOptions:a.dataURLOptions},[v])})),d=requestAnimationFrame(h)};d=requestAnimationFrame(h),this.resetObservers=()=>{l(),cancelAnimationFrame(d)}}initCanvasMutationObserver(t,r,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=wt(t,r,n,!1),a=zn(this.processMutation.bind(this),t,r,n),l=$n(this.processMutation.bind(this),t,r,n,this.mirror);this.resetObservers=()=>{o(),a(),l()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=r=>{this.rafStamps.latestId=r,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{const n=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||r===-1)return;const o=n.map(l=>Un(l,["type"])),{type:a}=n[0];this.mutationCb({id:r,type:a,commands:o}),this.pendingCanvasMutations.delete(t)}}class to{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new vn,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){if(t.length===0)return;const n={id:r,styleIds:[]},o=[];for(const a of t){let l;if(this.styleMirror.has(a))l=this.styleMirror.getId(a);else{l=this.styleMirror.add(a);const s=Array.from(a.rules||CSSRule);o.push({styleId:l,rules:s.map((i,u)=>({rule:Et(i),index:u}))})}n.styleIds.push(l)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class ro{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,r){const n=this.nodeMap.get(t);return n&&Array.from(n).some(o=>o!==r)}add(t,r){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(r))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function Q(e){return Object.assign(Object.assign({},e),{timestamp:He()})}let Y,Be,$e,Pe=!1;const le=$r();function Re(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:o="rr-block",blockSelector:a=null,ignoreClass:l="rr-ignore",ignoreSelector:s=null,maskTextClass:i="rr-mask",maskTextSelector:u=null,inlineStylesheet:c=!0,maskAllInputs:d,maskInputOptions:p,slimDOMOptions:h,maskInputFn:f,maskTextFn:m,hooks:T,packFn:D,sampling:v={},dataURLOptions:I={},mousemoveWait:B,recordCanvas:G=!1,recordCrossOriginIframes:V=!1,recordAfter:Z=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:b=!1,collectFonts:N=!1,inlineImages:w=!1,plugins:z,keepIframeSrcFn:oe=()=>!1,ignoreCSSAttributes:A=new Set([]),errorHandler:y}=e;kn(y);const g=V?window.parent===window:!0;let S=!1;if(!g)try{window.parent.document&&(S=!1)}catch{S=!0}if(g&&!t)throw new Error("emit function is required");B!==void 0&&v.mousemove===void 0&&(v.mousemove=B),le.reset();const C=d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:p!==void 0?p:{password:!0},k=h===!0||h==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:h==="all",headMetaDescKeywords:h==="all"}:h||{};Sn();let M,E=0;const x=O=>{for(const J of z||[])J.eventProcessor&&(O=J.eventProcessor(O));return D&&!S&&(O=D(O)),O};Y=(O,J)=>{var L;if(!((L=he[0])===null||L===void 0)&&L.isFrozen()&&O.type!==W.FullSnapshot&&!(O.type===W.IncrementalSnapshot&&O.data.source===_.Mutation)&&he.forEach(q=>q.unfreeze()),g)t==null||t(x(O),J);else if(S){const q={type:"rrweb",event:x(O),origin:window.location.origin,isCheckout:J};window.parent.postMessage(q,"*")}if(O.type===W.FullSnapshot)M=O,E=0;else if(O.type===W.IncrementalSnapshot){if(O.data.source===_.Mutation&&O.data.isAttachIframe)return;E++;const q=n&&E>=n,fe=r&&O.timestamp-M.timestamp>r;(q||fe)&&Be(!0)}};const R=O=>{Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.Mutation},O)}))},K=O=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.Scroll},O)})),X=O=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.CanvasMutation},O)})),se=O=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.AdoptedStyleSheet},O)})),$=new to({mutationCb:R,adoptedStyleSheetCb:se}),ee=new Vn({mirror:le,mutationCb:R,stylesheetManager:$,recordCrossOriginIframes:V,wrappedEmit:Y});for(const O of z||[])O.getMirror&&O.getMirror({nodeMirror:le,crossOriginIframeMirror:ee.crossOriginIframeMirror,crossOriginIframeStyleMirror:ee.crossOriginIframeStyleMirror});const te=new ro;$e=new eo({recordCanvas:G,mutationCb:X,win:window,blockClass:o,blockSelector:a,mirror:le,sampling:v.canvas,dataURLOptions:I});const U=new Zn({mutationCb:R,scrollCb:K,bypassOptions:{blockClass:o,blockSelector:a,maskTextClass:i,maskTextSelector:u,inlineStylesheet:c,maskInputOptions:C,dataURLOptions:I,maskTextFn:m,maskInputFn:f,recordCanvas:G,inlineImages:w,sampling:v,slimDOMOptions:k,iframeManager:ee,stylesheetManager:$,canvasManager:$e,keepIframeSrcFn:oe,processedNodeManager:te},mirror:le});Be=(O=!1)=>{Y(Q({type:W.Meta,data:{href:window.location.href,width:Vt(),height:Gt()}}),O),$.reset(),U.init(),he.forEach(L=>L.lock());const J=Cn(document,{mirror:le,blockClass:o,blockSelector:a,maskTextClass:i,maskTextSelector:u,inlineStylesheet:c,maskAllInputs:C,maskTextFn:m,slimDOM:k,dataURLOptions:I,recordCanvas:G,inlineImages:w,onSerialize:L=>{Ut(L,le)&&ee.addIframe(L),Ht(L,le)&&$.trackLinkElement(L),qe(L)&&U.addShadowRoot(L.shadowRoot,document)},onIframeLoad:(L,q)=>{ee.attachIframe(L,q),U.observeAttachShadow(L)},onStylesheetLoad:(L,q)=>{$.attachLinkElement(L,q)},keepIframeSrcFn:oe});if(!J)return console.warn("Failed to snapshot the document");Y(Q({type:W.FullSnapshot,data:{node:J,initialOffset:Bt(window)}}),O),he.forEach(L=>L.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&$.adoptStyleSheets(document.adoptedStyleSheets,le.getId(document))};try{const O=[],J=q=>{var fe;return F(Gn)({mutationCb:R,mousemoveCb:(P,ze)=>Y(Q({type:W.IncrementalSnapshot,data:{source:ze,positions:P}})),mouseInteractionCb:P=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.MouseInteraction},P)})),scrollCb:K,viewportResizeCb:P=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.ViewportResize},P)})),inputCb:P=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.Input},P)})),mediaInteractionCb:P=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.MediaInteraction},P)})),styleSheetRuleCb:P=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.StyleSheetRule},P)})),styleDeclarationCb:P=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.StyleDeclaration},P)})),canvasMutationCb:X,fontCb:P=>Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.Font},P)})),selectionCb:P=>{Y(Q({type:W.IncrementalSnapshot,data:Object.assign({source:_.Selection},P)}))},blockClass:o,ignoreClass:l,ignoreSelector:s,maskTextClass:i,maskTextSelector:u,maskInputOptions:C,inlineStylesheet:c,sampling:v,recordCanvas:G,inlineImages:w,userTriggeredOnInput:b,collectFonts:N,doc:q,maskInputFn:f,maskTextFn:m,keepIframeSrcFn:oe,blockSelector:a,slimDOMOptions:k,dataURLOptions:I,mirror:le,iframeManager:ee,stylesheetManager:$,shadowDomManager:U,processedNodeManager:te,canvasManager:$e,ignoreCSSAttributes:A,plugins:((fe=z==null?void 0:z.filter(P=>P.observer))===null||fe===void 0?void 0:fe.map(P=>({observer:P.observer,options:P.options,callback:ze=>Y(Q({type:W.Plugin,data:{plugin:P.name,payload:ze}}))})))||[]},T)};ee.addLoadListener(q=>{try{O.push(J(q.contentDocument))}catch(fe){console.warn(fe)}});const L=()=>{Be(),O.push(J(document)),Pe=!0};return document.readyState==="interactive"||document.readyState==="complete"?L():(O.push(re("DOMContentLoaded",()=>{Y(Q({type:W.DomContentLoaded,data:{}})),Z==="DOMContentLoaded"&&L()})),O.push(re("load",()=>{Y(Q({type:W.Load,data:{}})),Z==="load"&&L()},window))),()=>{O.forEach(q=>q()),te.destroy(),Pe=!1,On()}}catch(O){console.warn(O)}}Re.addCustomEvent=(e,t)=>{if(!Pe)throw new Error("please add custom event after start recording");Y(Q({type:W.Custom,data:{tag:e,payload:t}}))};Re.freezePage=()=>{he.forEach(e=>e.freeze())};Re.takeFullSnapshot=e=>{if(!Pe)throw new Error("please take full snapshot after start recording");Be(e)};Re.mirror=le;class Qe{constructor(){}static toggle(){this.isRecording?this.stop():this.start()}static start(){if(!this.isRecording){this.isRecording=!0;const t=Re({emit:n=>{this.events.push(n)},blockClass:"rr-block"}),r=()=>{this.isRecording=!1,t==null||t()};return this.stopHandler=r,r}return()=>{}}static stop(){var t;(t=this==null?void 0:this.stopHandler)==null||t.call(this)}static clear(){this.events=[]}static save(){console.log(this.events)}}De(Qe,"events",[]),De(Qe,"isRecording"),De(Qe,"stopHandler");export{co as C,Qe as S,lo as U,ao as a,so as b,dr as c,uo as d,po as f,fo as g,ho as i,io as o,de as u};
